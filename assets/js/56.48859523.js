(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{644:function(s,a,e){"use strict";e.r(a);var r=e(17),t=Object(r.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"docker系列教程3-常用操作命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker系列教程3-常用操作命令"}},[s._v("#")]),s._v(" Docker系列教程3：常用操作命令")]),s._v(" "),e("p",[s._v("上次分享了Docker的一些入门知识点和docker的安装，这次主要讲docker的常用操作命令。")]),s._v(" "),e("h1",{attrs:{id:"docker使用镜像常用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker使用镜像常用命令"}},[s._v("#")]),s._v(" Docker使用镜像常用命令")]),s._v(" "),e("h2",{attrs:{id:"_1-获取镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取镜像"}},[s._v("#")]),s._v(" 1. 获取镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker pull ubuntu:14.04\ndocker pull ubuntu \t\t\t#默认从registry.hub.docker.com中获取\ndocker pull hub.c.163.com/public/ubuntu:14.04\t\t#从网易蜂巢下载镜像\ndocker run -d -p 80:80 --name webserver nginx\t\t#没有镜像会先下载\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"_2-查看镜像信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-查看镜像信息"}},[s._v("#")]),s._v(" 2.查看镜像信息")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker images\ndocker inspect ubuntu:13.10\ndocker history ubuntu\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"_3-查找镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-查找镜像"}},[s._v("#")]),s._v(" 3.查找镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker search TERM\ndocker search centos\ndocker search nginx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"_4-删除镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-删除镜像"}},[s._v("#")]),s._v(" 4.删除镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker rmi IMAGE\ndocker rmi ubuntu:13.10    \ndocker rmi -f ubuntu:13.10\t#强制删除镜像\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"_5-创建镜像的三个方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-创建镜像的三个方法"}},[s._v("#")]),s._v(" 5.创建镜像的三个方法")]),s._v(" "),e("h3",{attrs:{id:"_1-基于已有镜像的容器创建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-基于已有镜像的容器创建"}},[s._v("#")]),s._v(" 1.基于已有镜像的容器创建")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]\n# docker run -it ubuntu:14.04 /bin/bash\nroot@cd391ad59121:/# \n记住容器ID：cd391ad59121\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('提交新的镜像：\ndocker commit -m "added a new file lxxxx" -a "jishubu lxx" cd391ad59121 test:0.1\n查看：\n# docker images\nREPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE\ntest                          0.1                 b2ac4664aadb        16 seconds ago      188 MB\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"_2-基于本地模板导入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-基于本地模板导入"}},[s._v("#")]),s._v(" 2.基于本地模板导入")]),s._v(" "),e("p",[s._v("从一个操作系统模板导入一个镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat centos-6-x86_64-minimal.tar.gz |docker import - centos6min\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_3-基于dockerfile创建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-基于dockerfile创建"}},[s._v("#")]),s._v(" 3.基于Dockerfile创建")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('FROM\tdocker.io/0702/centos7 \nMAINTAINER star  <funet8@163.com>\nENV TZ "Asia/Shanghai"\nENV TERM xterm\n#新建用户和用户组\nRUN groupadd www && useradd -g www www\n等等\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"_6-保存和导出镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-保存和导出镜像"}},[s._v("#")]),s._v(" 6.保存和导出镜像")]),s._v(" "),e("p",[s._v("保存： docker save")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker save <myimage>:<tag> | gzip > <myimage>_<tag>.tar.gz\ndocker save -o ubuntu_14.04.tar ubuntu:14.04\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("通过文件将镜像复制给他人")]),s._v(" "),e("p",[s._v("导入： docker load")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker load < ubuntu_14.04.tar\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("导入镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("gunzip -c <myimage>_<tag>.tar.gz | docker load\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"_7-上传镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-上传镜像"}},[s._v("#")]),s._v(" 7.上传镜像")]),s._v(" "),e("p",[s._v("使用 docker push 默认上传到docker hub官方")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker pust NAME[:TAG] |[REGISTRY_HOST[:REGISTRY_PORT ] /] NAME[:TAG]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"docker操作容器常用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker操作容器常用命令"}},[s._v("#")]),s._v(" Docker操作容器常用命令")]),s._v(" "),e("h2",{attrs:{id:"一、创建容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、创建容器"}},[s._v("#")]),s._v(" 一、创建容器")]),s._v(" "),e("h3",{attrs:{id:"_1-新建容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-新建容器"}},[s._v("#")]),s._v(" 1.新建容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker create --help\ndocker create -it ubuntu:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("create、run命令支持选项都非常复杂")]),s._v(" "),e("h3",{attrs:{id:"_2-启动容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动容器"}},[s._v("#")]),s._v(" 2.启动容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker start NAMES\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_3-创建并启动容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建并启动容器"}},[s._v("#")]),s._v(" 3.创建并启动容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('docker run ubuntu:15.10 /bin/echo "hello world"\ndocker run -it ubuntu:15.10 /bin/bash \ndocker run -v /data/mysql:/var/lib/mysql -p 61920:3306 --name mariadb -d mariadb:latest\ndocker run -d --name myFpm -p 9000:9000 -v  /data/wwwroot/web:/usr/share/nginx/html bitnami/php-fpm\ndocker run -d --name myNginx -p 80:80 -v /data/wwwroot/web:/usr/share/nginx/html -v /data/wwwroot/log:/var/log/nginx nginx\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("-i 分配一个伪终端并绑定到容器的标准输出上\n-t 容器的标准输入保持打开\n-p 表示Docker 镜像内部容器端口暴露给主机\n-v标识来给容器内添加一个数据卷，你也可以在一次docker run命令中多次使用-v标识挂载多个数据卷")]),s._v(" "),e("h3",{attrs:{id:"_4-守护态运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-守护态运行"}},[s._v("#")]),s._v(" 4.守护态运行")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('docker run -d ubuntu:15.10 /bin/sh -c "while true;do echo hello world; sheep 1;done"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_5-查看容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-查看容器"}},[s._v("#")]),s._v(" 5.查看容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker ps -l\ndocker logs NAMES  #显示容器的标准输出\ndocker top NAMES   #docker top 来查看容器内部运行的进程\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"二、停止、启动、重启容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、停止、启动、重启容器"}},[s._v("#")]),s._v(" 二、停止、启动、重启容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker stop NAME\ndocker start NAME\ndocker restart NAME\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"三、进入容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、进入容器"}},[s._v("#")]),s._v(" 三、进入容器")]),s._v(" "),e("h3",{attrs:{id:"_1、-exec命令-推荐"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、-exec命令-推荐"}},[s._v("#")]),s._v(" 1、 exec命令（推荐）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker exec -it lxx-wordpress /bin/bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2、attach-命令-不推荐"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、attach-命令-不推荐"}},[s._v("#")]),s._v(" 2、attach 命令（不推荐）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# docker run -itd ubuntu:14.04\n522681d4c41c7c34ad04779e83253352d1080e85eb9c8f2d1e25f81758379d19\n# docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n522681d4c41c        ubuntu:14.04        "/bin/bash"         12 seconds ago      Up 10 seconds                           distracted_perlman\n# docker attach distracted_perlman\nroot@522681d4c41c:/# \n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"_3、nsenter工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、nsenter工具"}},[s._v("#")]),s._v(" 3、nsenter工具")]),s._v(" "),e("p",[s._v("需要安装软件，不推荐")]),s._v(" "),e("h2",{attrs:{id:"四、删除容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、删除容器"}},[s._v("#")]),s._v(" 四、删除容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker rm NAMES\ndocker rm -f NAMES  #强制删除\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"五、导入和导出容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、导入和导出容器"}},[s._v("#")]),s._v(" 五、导入和导出容器")]),s._v(" "),e("p",[s._v("1.导出容器 -docker export")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# docker run -itd ubuntu:14.04 /bin/bash\n# docker export -o test_for_run.tar loving_bohr\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("2.导入容器 docker import")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker import test_for_run.tar  test/ubuntu:v1.0\ndocker images\nREPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE\ntest/ubuntu                   v1.0                69f170a40e6f        6 seconds ago       175.1 MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"docker-save-load-export-import的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-save-load-export-import的区别"}},[s._v("#")]),s._v(" Docker save load export import的区别")]),s._v(" "),e("h2",{attrs:{id:"export"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#export"}},[s._v("#")]),s._v(" export")]),s._v(" "),e("p",[s._v("export命令用于持久化容器（不是镜像）。所以，我们就需要通过以下方法得到容器ID：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo docker ps -a\n接着执行导出：\nsudo docker export <CONTAINER ID> > /home/export.tar\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"save"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#save"}},[s._v("#")]),s._v(" save")]),s._v(" "),e("p",[s._v("Save命令用于持久化镜像（不是容器）。所以，我们就需要通过以下方法得到镜像名称：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo docker images\n接着执行保存：\nsudo docker save busybox-1 > /home/save.tar\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("使用export比使用save保存的文件要小一些")]),s._v(" "),e("h2",{attrs:{id:"load-save"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#load-save"}},[s._v("#")]),s._v(" load save")]),s._v(" "),e("p",[s._v("两者的使用方法是一样的，导入压缩包生成镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker import - busybox-1-export:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("docker import可以重新指定镜像的名字")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker load < /home/save.tar\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"它们之间到底存在什么不同呢"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#它们之间到底存在什么不同呢"}},[s._v("#")]),s._v(" "),e("strong",[s._v("它们之间到底存在什么不同呢？")])]),s._v(" "),e("p",[s._v("首先，docker import可以重新指定镜像的名字，docker load不可以")]),s._v(" "),e("p",[s._v("其次，我们发现导出后的版本会比原来的版本稍微小一些。那是因为导出后，会丢失历史和元数据。执行下面的命令就知道了：\n显示镜像的所有层(layer)")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo docker images --tree\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("执行命令，显示下面的内容。正你看到的，导出后再导入(exported-imported)的镜像会丢失所有的历史，而保存后再加载（saveed-loaded）的镜像没有丢失历史和层(layer)。这意味着使用导出后再导入的方式，你将无法回滚到之前的层(layer)，同时，使用保存后再加载的方式持久化整个镜像，就可以做到层回滚（可以执行docker tag 来回滚之前的层）。")]),s._v(" "),e("h1",{attrs:{id:"文件权限管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文件权限管理"}},[s._v("#")]),s._v(" 文件权限管理")]),s._v(" "),e("p",[s._v("实际环境中docker程序中生成的文件权限 在宿主机上显示的是 500")]),s._v(" "),e("p",[s._v("在宿主上查看www用户的ID")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# cat /etc/passwd |grep www\nwww:x:1001:1001::/home/www:/sbin/nologin\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("进入docker虚拟机")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# usermod -u 1001 www\n# groupmod -g 1001 www\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("将所需要的目录更改权限")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("chown www.www -R /data/web/dir/   \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"常用命令图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用命令图"}},[s._v("#")]),s._v(" 常用命令图")]),s._v(" "),e("p",[s._v("有牛人总结了docker的操作命令，看图：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png?aliyun",alt:"docker常用命令"}})]),s._v(" "),e("h1",{attrs:{id:"总结一下常用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结一下常用命令"}},[s._v("#")]),s._v(" 总结一下常用命令")]),s._v(" "),e("p",[s._v("其中<>阔起来的参数为必选，[]阔起来为可选")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker version 查看docker的版本号，包括客户端、服务端、依赖的Go等\n\ndocker info 查看系统(docker)层面信息，包括管理的images, containers数等\n\ndocker search  在docker index中搜索image\n\ndocker pull  从docker registry server 中下拉image\n\ndocker push  推送一个image或repository到registry\n\ndocker push :TAG 同上，指定tag\n\ndocker inspect  查看image或container的底层信息\n\ndocker images TODO filter out the intermediate image layers (intermediate image layers 是什么)\n\ndocker images -a 列出所有的images\n\ndocker ps 默认显示正在运行中的container\n\ndocker ps -l 显示最后一次创建的container，包括未运行的\n\ndocker ps -a 显示所有的container，包括未运行的\n\ndocker logs  查看container的日志，也就是执行命令的一些输出\n\ndocker rm  删除一个或多个container\n\ndocker rm `docker ps -a -q` 删除所有的container\n\ndocker ps -a -q | xargs docker rm 同上, 删除所有的container\n\ndocker rmi  删除一个或多个image\n\ndocker start/stop/restart  开启/停止/重启container\n\ndocker start -i  启动一个container并进入交互模式\n\ndocker attach  attach一个运行中的container\n\ndocker run  使用image创建container并执行相应命令，然后停止\n\ndocker run -i -t  /bin/bash 使用image创建container并进入交互模式, login shell是/bin/bash\n\ndocker run -i -t -p  将container的端口映射到宿主机的端口\n\ndocker commit  [repo:tag] 将一个container固化为一个新的image，后面的repo:tag可选\n\n\ndocker build\n寻找path路径下名为的Dockerfile的配置文件，使用此配置生成新的image\ndocker build -t repo[:tag] 同上，可以指定repo和可选的tag\ndocker build -  使用指定的dockerfile配置文件，docker以stdin方式获取内容，使用此配置生成新的image\n\ndocker port  查看本地哪个端口映射到container的指定端口，其实用docker ps 也可以看到\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);