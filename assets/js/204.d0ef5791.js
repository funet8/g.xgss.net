(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{784:function(s,a,n){"use strict";n.r(a);var e=n(17),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"搭建开源美观的数据库监控系统-lepus"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建开源美观的数据库监控系统-lepus"}},[s._v("#")]),s._v(" 搭建开源美观的数据库监控系统-Lepus")]),s._v(" "),n("h2",{attrs:{id:"天兔数据库监控系统-lepus"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#天兔数据库监控系统-lepus"}},[s._v("#")]),s._v(" 天兔数据库监控系统-Lepus")]),s._v(" "),n("p",[s._v("欢迎大家使用天兔数据库监控系统（以下简称为Lepus）。Lepus是一套开源的数据库监控平台，目前已经支持MySQL、Oracle、PostgresQL、GreatSQL、MongoDB、Redis等数据库的基本监控和告警。Lepus无需在每台数据库服务器部署脚本或Agent，只需要在数据库创建授权帐号后，即可进行远程监控，适合监控数据库服务器较多的公司和监控云中数据库，这将为企业大大减化监控部署流程，同时Lepus系统内置了丰富的性能监控指标，让企业能够在数据库宕机前发现潜在性能问题进行处理，减少企业因为数据库问题导致的直接损失。")]),s._v(" "),n("p",[s._v("开源地址： https://gitee.com/lepus-group/lepus")]),s._v(" "),n("p",[s._v("官网： https://www.lepus.cc/")]),s._v(" "),n("p",[s._v("Lepus有v3版本和v5版本")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://imgoss.xgss.net/picgo/mysql-leplus.webp.jpg?aliyun",alt:"mysql-leplus.webp"}})]),s._v(" "),n("h1",{attrs:{id:"docker安装v3版本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker安装v3版本"}},[s._v("#")]),s._v(" Docker安装v3版本")]),s._v(" "),n("p",[s._v("https://hub.docker.com/r/georce/lepus")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker run -itd --name lepus \\\n--restart always \\\n-p 83:80 \\\n-p 50920:3306 \\\ndocker.io/georce/lepus\n\nhttp://IP:83\nUSERNAME: admin\nPASSWORD: Lepusadmin\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220617113950783.png?aliyun",alt:"image-20220617113950783"}})]),s._v(" "),n("p",[s._v("V3版本的控制面板")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220617114238081.png?aliyun",alt:"image-20220617114238081"}})]),s._v(" "),n("p",[s._v("本教程主要在centos7下安装v5版本，并且使用监控MySQL。")]),s._v(" "),n("h2",{attrs:{id:"系统说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#系统说明"}},[s._v("#")]),s._v(" 系统说明")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("系统： centos7\nIP: 192.168.1.3\n数据库： \n192.168.1.6:3306 \n用户名：root \n密码：123456\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"软件要求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#软件要求"}},[s._v("#")]),s._v(" 软件要求")]),s._v(" "),n("p",[s._v("Lepus-V5部署需要部署以下软件：")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("软件名称")]),s._v(" "),n("th",[s._v("推荐版本")]),s._v(" "),n("th",[s._v("必须")]),s._v(" "),n("th",[s._v("备注")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("Golang")]),s._v(" "),n("td",[s._v("1.4-1.8")]),s._v(" "),n("td",[s._v("否")]),s._v(" "),n("td",[s._v("源码编译运行必须安装/使用二进制方式无需安装 （直接 yum install golang）")])]),s._v(" "),n("tr",[n("td",[s._v("MySQL")]),s._v(" "),n("td",[s._v("5.6")]),s._v(" "),n("td",[s._v("是")]),s._v(" "),n("td",[s._v("用于存储基础数据和事件数据（本文安装教程略）")])]),s._v(" "),n("tr",[n("td",[s._v("InfluxDB")]),s._v(" "),n("td",[s._v("1.x")]),s._v(" "),n("td",[s._v("否")]),s._v(" "),n("td",[s._v("事件数据默认存储MySQL，支持存储到InfluxDB,如有使用InfluxDB需求则必须需要部署（笔者未安装）")])]),s._v(" "),n("tr",[n("td",[s._v("Redis")]),s._v(" "),n("td",[s._v("5.x")]),s._v(" "),n("td",[s._v("是")]),s._v(" "),n("td",[s._v("用于报警系统限流（本文安装教程略）")])]),s._v(" "),n("tr",[n("td",[s._v("NSQ")]),s._v(" "),n("td",[s._v("1.2.x")]),s._v(" "),n("td",[s._v("是")]),s._v(" "),n("td",[s._v("基于gaolang的高性能消息队列，用于事件消息传输（参考以下）")])])])]),s._v(" "),n("h2",{attrs:{id:"centos7安装nsq"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装nsq"}},[s._v("#")]),s._v(" centos7安装NSQ")]),s._v(" "),n("p",[s._v("NSQ 是实时的分布式消息处理平台，其设计的目的是用来大规模地处理每天数以十亿计级别的消息。")]),s._v(" "),n("p",[s._v("参考文档：https://nsq.io/overview/quick_start.html")]),s._v(" "),n("h3",{attrs:{id:"_1-下载软件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载软件"}},[s._v("#")]),s._v(" 1.下载软件")]),s._v(" "),n("p",[s._v("二进制下载路径：https://github.com/nsqio/nsq/releases")]),s._v(" "),n("p",[s._v("版本：nsq-1.2.1.linux-amd64.go1.16.6.tar.gz")]),s._v(" "),n("p",[s._v("上传到CentOS服务器，解压即可。")]),s._v(" "),n("p",[s._v("启动\n进入解压路径的/bin目录")]),s._v(" "),n("h3",{attrs:{id:"_2-安装nsq"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装nsq"}},[s._v("#")]),s._v(" 2.安装NSQ")]),s._v(" "),n("p",[s._v("进入解压路径的/data/NSQ目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# mkdir /data/NSQ\n# wget http://js.funet8.com/centos_software/nsq-1.2.1.linux-amd64.go1.16.6.tar.gz # 备用下载地址\n# tar -zxvf nsq-1.2.1.linux-amd64.go1.16.6.tar.gz\n# cd nsq-1.2.1.linux-amd64.go1.16.6/bin\n\n1. 启动nsqlookupd(nohup 后台启动):\n# nohup ./nsqlookupd &\n\n2. 启动nsqd(nohup 后台启动)\n# nohup ./nsqd --lookupd-tcp-address=192.168.1.3:4160 &\n\n3. 启动nsqadmin(nohup 后台启动)\n# nohup ./nsqadmin --lookupd-http-address=192.168.1.3:4161 &\n\n4. 启动日志查看：bin目录会自动生成nohup日志,查看命令如下：\n# tail -f nohup.out\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h3",{attrs:{id:"_3-nsq消息测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-nsq消息测试"}},[s._v("#")]),s._v(" 3.NSQ消息测试")]),s._v(" "),n("p",[s._v("启动nsq_to_file，将消息写入/tmp文件的日志文件，文件名默认由主题topic+主机+日期时间戳组成")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# nohup ./nsq_to_file --topic=test --output-dir=/tmp --lookupd-http-address=192.168.1.3:4161 &\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("使用curl命令，发布一条消息,返回OK")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# curl -d 'hello world' 'http://192.168.1.3:4151/pub?topic=test'\nOK\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("浏览器方问web界面：http://192.168.1.3:4171/，界面如下：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220617095510502.png?aliyun",alt:"image-20220617095510502"}})]),s._v(" "),n("h2",{attrs:{id:"安装lepus"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装lepus"}},[s._v("#")]),s._v(" 安装Lepus")]),s._v(" "),n("p",[s._v("Linux环境使用二进制安装Lepus")]),s._v(" "),n("h3",{attrs:{id:"_1-下载二进制版本lepus"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载二进制版本lepus"}},[s._v("#")]),s._v(" 1.下载二进制版本Lepus")]),s._v(" "),n("p",[s._v("进入官网下载页面，根据操作系统选择Linux或者Windows对应的二进制包，下载lepus二进制包，下载地址： https://www.lepus.cc/downloads/  。")]),s._v(" "),n("p",[s._v("Linux环境二进制包文件名为 ：lepus.5.x.linux-amd64.tar.gz，Windows环境二进制包文件名为：lepus.5.x.windows-amd64.zip")]),s._v(" "),n("p",[s._v("本文下载：lepus.5.1.linux-amd64.tar.gz")]),s._v(" "),n("h3",{attrs:{id:"_2-下载并修改文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-下载并修改文件"}},[s._v("#")]),s._v(" 2.下载并修改文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /data/\nwget http://js.funet8.com/centos_software/lepus.5.1.linux-amd64.tar.gz # 备用下载地址\ntar -zxvf lepus.5.1.linux-amd64.tar.gz\nmv lepus.5.1.linux-amd64 lepus.5.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"_3-导入初始化数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-导入初始化数据库"}},[s._v("#")]),s._v(" 3.导入初始化数据库")]),s._v(" "),n("p",[s._v("进入lepus二进制目录，并导入数据库初始化表结构和数据")]),s._v(" "),n("p",[s._v("在192.168.1.6的数据库上数据库'lepus_db'")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd lepus.5.1/sql\nmysql -uroot -h192.168.1.6 -P'3306' -p'123456' lepus_db < init_table.sql\nmysql -uroot -h192.168.1.6 -P'3306' -p'123456' lepus_db < init_data.sql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220616200345620.png?aliyun",alt:"image-20220616200345620"}})]),s._v(" "),n("h3",{attrs:{id:"_4-生成配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-生成配置文件"}},[s._v("#")]),s._v(" 4.生成配置文件")]),s._v(" "),n("p",[s._v("从example中复制配置文件，并进行设置，设置里包含连接MySQL、Redis、NSQ、告警邮件网关，\n（MySQL、Redis、NSQ为必须安装，InfluxDB为可选，开源组件请大家自行安装部署）。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cp etc/proxy.example.ini etc/proxy.ini\ncp etc/alarm.example.ini etc/alarm.ini\ncp etc/config.example.ini etc/config.ini\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("由于数据库不是本机，所以需要修改配置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#  vim etc/proxy.ini\n修改如下\n[main]\nport = 8800\nlog = /tmp/lepus_proxy.log\ndebug=1\nenable_influxdb=0\n\n[nsq]\nnsq_server = 127.0.0.1:4150\n\n[mysql]\nmysql_host = 192.168.1.6\nmysql_port = 3306\nmysql_user = root\nmysql_password = 123456\nmysql_database = lepus_db\n\n[influxdb]\ninflux_host = 192.168.1.6\ninflux_port = 8086\ninflux_user = root\ninflux_password = 123456\ninflux_database = lepus_db\n\n# vim etc/alarm.ini\n修改如下\n[main]\ndebug=1\nlog = /tmp/lepus_alarm.log\n\n[nsq]\nnsq_server = 127.0.0.1:4150\n\n[mysql]\nmysql_host = 192.168.1.6\nmysql_port = 3306\nmysql_user = root\nmysql_password = 123456\nmysql_database = lepus_db\n\n[redis]\nredis_host = 127.0.0.1\nredis_port = 6379\nredis_pass = password\n\n[mail]\nmail_host = smtp.163.com\nmail_port = 465\nmail_user = alarm@163.com\nmail_pass = password\nmail_from = alarm@163.com\n\n# vim etc/config.ini\n修改配置\n[main]\nlog_dir = /tmp/\ndebug = 1\ninterval = 10\nproxy = http://127.0.0.1:8800\ndb_pass_key = L1e2p3u4s5Abc321\n\n[mysql]\nmysql_host = 192.168.1.6\nmysql_port = 3306\nmysql_user = root\nmysql_password = 123456\nmysql_database = lepus_db\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br")])]),n("p",[s._v("5.启动服务组件")]),s._v(" "),n("p",[s._v("请按照以下顺序依次启动组件，启动报错请检查配置文件，未报错需要将任务放到后台运行。")]),s._v(" "),n("p",[s._v("启动Proxy模块")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# cd /data/lepus.5.1/bin/\n# ./lepus_proxy --config=../etc/proxy.ini\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("启动Task模块")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# ./lepus_task --config=../etc/config.ini\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("启动Alarm模块")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("./lepus_alarm --config=../etc/alarm.ini\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("启动后可以查看进程")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# ps -ef|grep lepus\nroot      3810  3135  0 Jun16 pts/0    00:00:00 ./lepus_proxy --config=../etc/proxy.ini\nroot      3816  3135  0 Jun16 pts/0    00:00:00 ./lepus_task --config=../etc/config.ini\nroot      5329  5000  0 09:55 pts/1    00:00:00 ./lepus_alarm --config=../etc/alarm.ini\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("查看运行日志，没有Error则运行正常，如果日志过多可以将配置文件debug设置为0，则不会输出debug日志。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tail -f /tmp/lepus_proxy.log\ntail -f /tmp/lepus_task.log\ntail -f /tmp/lepus_alarm.log\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("提示：Lepus安装完成后还需要安装运行Lepus Console控制台。")]),s._v(" "),n("h2",{attrs:{id:"安装lepus-console"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装lepus-console"}},[s._v("#")]),s._v(" 安装Lepus-console")]),s._v(" "),n("p",[s._v("Lepus Console控制台是用于配置和管理Lepus的WEB管理界面，没有控制台，Lepus也可以正常运行，您也可以通过操作数据库数据进行监控和报警，但是使用Lepus Console会让使用更加便捷，并且查询随时查询监控事件数据和性能图表。")]),s._v(" "),n("h3",{attrs:{id:"下载lepus-console安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载lepus-console安装包"}},[s._v("#")]),s._v(" 下载Lepus Console安装包")]),s._v(" "),n("p",[s._v("1.进入官网下载页面，根据操作系统选择Linux或者Windows对应的Lepus Console二进制包，下载lepus二进制包，下载地址： https://www.lepus.cc/downloads/  。")]),s._v(" "),n("p",[s._v("笔者下载 lepus-console.5.1.linux-amd64.tar.gz")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir /data/lepus-console\ncd /data/lepus-console\nwget http://js.funet8.com/centos_software/lepus-console.5.1.linux-amd64.tar.gz # 备用下载地址\ntar -zxvf lepus-console.5.1.linux-amd64.tar.gz\nmv lepus-console.5.1.linux-amd64 lepus-console.5.1\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("2.进入lepus-console-linux-amd64目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd lepus-console.5.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("3.复制和修改配置文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# cp setting.example.yml setting.yml\n修改配置文件\n# vim setting.yml \n填写以下，只修改mysql的配置：\nlog:\n  path: "/tmp/lepus_api.log"\n  level: "debug"\n  debug: true\n\ndataSource:\n  eventStorageEngine: mysql\n  host: 192.168.1.6\n  port: 3306\n  user: root\n  password: 123456\n  database: lepus_db\n  influxHost: 127.0.0.1\n  influxPort: 8086\n  influxUser: admin\n  influxPassword:\n  influxDatabase: lepus_db\n\ntoken:\n  storage: "mysql"\n  key: "S9p2+dsfM1CzLF=="\n  name: "lepus-pro"\n  expired: "3d"\n\ndecrypt:\n  signKey: "1234567890abcdef"\n  dbPassKey: "L1e2p3u4s5Abc321"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("p",[s._v("4.运行控制台")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# ./lepus_console\n...\n[GIN-debug] Listening and serving HTTP on :8080\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("5.访问控制台")]),s._v(" "),n("p",[s._v("访问 IP:8080 可以登录界面进行登录，默认管理密码为：admin/lepusadmin")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220617101249323.png?aliyun",alt:"image-20220617101249323"}})]),s._v(" "),n("p",[s._v("进入控制台")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220617101343150.png?aliyun",alt:"image-20220617101343150"}})]),s._v(" "),n("p",[s._v("至此，lepus在centos7系统下就安装完成了，再就是添加mysql监控节点和异常通知告警的配置了。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220617101735813.png?aliyun",alt:"image-20220617101735813"}})]),s._v(" "),n("p",[s._v("使用手册： https://www.lepus.cc/docs/lepus-v5/manual/")]),s._v(" "),n("p",[s._v("参考：https://www.lepus.cc/docs/lepus-v5/")])])}),[],!1,null,null,null);a.default=t.exports}}]);