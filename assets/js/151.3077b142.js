(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{734:function(s,a,t){"use strict";t.r(a);var n=t(17),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"开源的数据同步中间件-dbsyncer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开源的数据同步中间件-dbsyncer"}},[s._v("#")]),s._v(" 开源的数据同步中间件-DBSyncer")]),s._v(" "),t("h1",{attrs:{id:"项目介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目介绍"}},[s._v("#")]),s._v(" 项目介绍")]),s._v(" "),t("p",[s._v("DBSyncer是一款开源的数据同步中间件，提供Mysql、Oracle、SqlServer、Elasticsearch(ES)、Kafka、SQL(Mysql/Oracle/SqlServer)等同步场景。支持上传插件自定义同步转换业务，提供监控全量和增量数据统计图、应用性能预警等。")]),s._v(" "),t("p",[s._v("开源地址：https://gitee.com/ghi/dbsyncer")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("组合驱动，自定义库同步到库组合，关系型数据库与非关系型之间组合，任意搭配表同步映射关系")])]),s._v(" "),t("li",[t("p",[s._v("实时监控，驱动全量或增量实时同步运行状态、结果、同步日志和系统日志")])]),s._v(" "),t("li",[t("p",[s._v("开发插件，自定义转化同步逻辑")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/%E5%BC%80%E6%BA%90%E7%9A%84%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E4%B8%AD%E9%97%B4%E4%BB%B6-DBSyncer.jpg?aliyun",alt:"开源的数据同步中间件-DBSyncer"}})])])]),s._v(" "),t("h1",{attrs:{id:"安装部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装部署"}},[s._v("#")]),s._v(" 安装部署")]),s._v(" "),t("h2",{attrs:{id:"系统介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统介绍"}},[s._v("#")]),s._v(" 系统介绍")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("centos7\n\nip:192.168.1.8\n\n需要部署安装JDK和Maven\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"安装jdk-1-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装jdk-1-8"}},[s._v("#")]),s._v(" 安装JDK 1.8")]),s._v(" "),t("p",[s._v("如果安装了可以忽略")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# mkdir /data/software/\n# cd /data/software/\n# wget http://js.funet8.com/centos_software/jdk-8u211-linux-x64.tar.gz\n# mkdir /usr/local/java/\n# tar -zxvf jdk-8u211-linux-x64.tar.gz -C /usr/local/java/\n\n# echo '\nexport JAVA_HOME=/usr/local/java/jdk1.8.0_211\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib\nexport PATH=${JAVA_HOME}/bin:$PATH\n'>> /etc/profile\n\n# source /etc/profile\n\n# ln -s /usr/local/java/jdk1.8.0_211/bin/java /usr/bin/java\n\n# java -version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h2",{attrs:{id:"安装maven"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装maven"}},[s._v("#")]),s._v(" 安装maven")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# mkdir /data/maven\n# cd /data/maven\n# wget http://mirrors.cnnic.cn/apache/maven/maven-3/3.5.4/binaries/apache-maven-3.5.4-bin.tar.gz\n备用下载地址：\n# wget http://js.funet8.com/centos_software/apache-maven-3.5.4-bin.tar.gz\n# tar -zxvf apache-maven-3.5.4-bin.tar.gz\n\n配置maven：  \n# vim /etc/profile\n在配置文件配置中加上：\n\nexport MAVEN_HOME=/data/maven/apache-maven-3.5.4\nexport PATH=$MAVEN_HOME/bin:$PATH\n\n使配置立即生效\n# source  /etc/profile\n\n# mvn --version\nApache Maven 3.5.4\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h2",{attrs:{id:"下载安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载安装包"}},[s._v("#")]),s._v(" 下载安装包")]),s._v(" "),t("p",[s._v("https://gitee.com/ghi/dbsyncer/releases ，这里我下载v1.1.7-Beta版本")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# cd /data/wwwroot/web/\n# wget http://js.funet8.com/centos_software/dbsyncer-v1.1.7-Beta.tar.gz\n解压\n# tar -zxvf dbsyncer-v1.1.7-Beta.tar.gz \n# cd dbsyncer-v1.1.7-Beta\n编译包\n# sh build.sh \n...\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 03:17 min\n[INFO] Finished at: 2022-04-28T16:40:21+08:00\n[INFO] ------------------------------------------------------------------------\n‘/data/wwwroot/web/dbsyncer-v1.1.7-Beta/dbsyncer-web/target/dbsyncer-1.1.7-Beta.zip’ -> ‘/data/wwwroot/web/dbsyncer-v1.1.7-Beta/dbsyncer-1.1.7-Beta.zip’\n\n# unzip dbsyncer-1.1.7-Beta.zip \n# cd dbsyncer-1.1.7-Beta \n# ./bin/startup.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("查看端口")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# netstat -tunpl|grep 18686\ntcp6       0      0 :::18686                :::*                    LISTEN      5754/java     \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("开放端口(非必要)")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("iptables -A INPUT -p tcp --dport 18686 -j ACCEPT\nservice iptables save\nsystemctl restart iptables.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"打开浏览器访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打开浏览器访问"}},[s._v("#")]),s._v(" 打开浏览器访问")]),s._v(" "),t("p",[s._v("http://IP:18686")]),s._v(" "),t("p",[s._v("http://192.168.1.8:18686/")]),s._v(" "),t("h3",{attrs:{id:"账号和密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#账号和密码"}},[s._v("#")]),s._v(" 账号和密码")]),s._v(" "),t("p",[s._v("admin/admin")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220428165146386.png?aliyun",alt:"image-20220428165146386"}})]),s._v(" "),t("h1",{attrs:{id:"同步mysql数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#同步mysql数据库"}},[s._v("#")]),s._v(" 同步MySQL数据库")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("192.168.1.6:3306 同步到---\x3e 192.168.1.8:61921\n\n192.168.1.6:61922\nroot\n123456\n\n192.168.1.8:61921\nroot\n123456\n同步数据库 dzzoffice\n\nmysql -u root -h 192.168.1.6 -P61922 -p'123456'\nmysql -u root -h 192.168.1.8 -P61921 -p'123456'\n查看binlog日志\n> show binary logs;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("目标库的server_id不能为1")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysqladmin -u root -h 192.168.1.8 -p123456 -P61921 shutdown\n修改mysql的配置文件\nserver_id=1 改为 server_id=100\n再次启动\n/usr/bin/mysqld_safe --defaults-file=/data/mysql/etc/61921.cnf &\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"添加连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加连接"}},[s._v("#")]),s._v(" 添加连接")]),s._v(" "),t("p",[s._v("进入后台点击 “添加连接”")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220428181006187.png?aliyun",alt:"image-20220428181006187"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220428181020667.png?aliyun",alt:"image-20220428181020667"}})]),s._v(" "),t("p",[s._v("添加驱动")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220428181251742.png?aliyun",alt:"image-20220428181251742"}})]),s._v(" "),t("p",[s._v("启动")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220428181231313.png?aliyun",alt:"image-20220428181231313"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220428181337970.png?aliyun",alt:"image-20220428181337970"}})]),s._v(" "),t("p",[s._v("优点： 开源系统，使用上类似于阿里云的DTS，如果作为数据同步使用还可以，作为生产环境就需要多测试了")]),s._v(" "),t("p",[s._v("主要用于A库的某数据库同步到B库")]),s._v(" "),t("h2",{attrs:{id:"增量同步配置-源库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#增量同步配置-源库"}},[s._v("#")]),s._v(" 增量同步配置（源库）")]),s._v(" "),t("p",[s._v("Mysql")]),s._v(" "),t("ul",[t("li",[s._v("Dump Binlog二进制日志。Master同步Slave, 创建IO线程读取数据，写入relaylog，基于消息订阅捕获增量数据。")]),s._v(" "),t("li",[s._v("配置")])]),s._v(" "),t("p",[s._v("修改my.ini文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#服务唯一ID\nserver_id=1\nlog-bin=mysql_bin\nbinlog-format=ROW\nmax_binlog_cache_size = 256M\nmax_binlog_size = 512M\nexpire_logs_days = 7\n#监听同步的库, 多个库使用英文逗号“,”拼接\nreplicate-do-db=test\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h2",{attrs:{id:"oracle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#oracle"}},[s._v("#")]),s._v(" "),t("strong",[s._v("Oracle")])]),s._v(" "),t("ul",[t("li",[s._v("CDN注册订阅。监听增删改事件，得到rowid，根据rowid执行SQL查询，得到变化数据。")]),s._v(" "),t("li",[s._v("授予账号监听权限, 同时要求目标源表必须定义一个长度为18的varchar字段，通过接收rowid值实现增删改操作。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("grant change notification to 你的账号\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h1",{attrs:{id:"定时"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定时"}},[s._v("#")]),s._v(" 定时")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/5eb194cd687f4b669d44cba753f4c30d.png?aliyun",alt:"DBSyncer 一款开源的数据同步中间件"}})]),s._v(" "),t("p",[s._v("假设源表数据格式")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/a957bb7f7fcb4fb8847e635bf20ea31d.png?aliyun",alt:"DBSyncer 一款开源的数据同步中间件"}})]),s._v(" "),t("h1",{attrs:{id:"预览"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#预览"}},[s._v("#")]),s._v(" 预览")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/aab4da41d1154f3e96bb406c04454693.png?aliyun",alt:"DBSyncer 一款开源的数据同步中间件"}})]),s._v(" "),t("p",[s._v("驱动管理")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/6422d911c563406495b6c64ceb1b4072.png?aliyun",alt:"DBSyncer 一款开源的数据同步中间件"}})]),s._v(" "),t("h2",{attrs:{id:"驱动详情"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#驱动详情"}},[s._v("#")]),s._v(" 驱动详情")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/29520029fb8b46c080f2926cd86ffe1c.png?aliyun",alt:"DBSyncer 一款开源的数据同步中间件"}})]),s._v(" "),t("h2",{attrs:{id:"驱动表字段关系配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#驱动表字段关系配置"}},[s._v("#")]),s._v(" 驱动表字段关系配置")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/3180974b153f4727bd0bbda41f64086f.png?aliyun",alt:"DBSyncer 一款开源的数据同步中间件"}})]),s._v(" "),t("h2",{attrs:{id:"监控"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#监控"}},[s._v("#")]),s._v(" 监控")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/000645_35a544b3_376718.png?aliyun",alt:"img"}})]),s._v(" "),t("h2",{attrs:{id:"上传插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传插件"}},[s._v("#")]),s._v(" 上传插件")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/232643_9b1f3f64_376718.png?aliyun",alt:"img"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);