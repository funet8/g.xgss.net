(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{701:function(s,a,e){"use strict";e.r(a);var t=e(17),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"linux基于docker安装开源项目管理禅道"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux基于docker安装开源项目管理禅道"}},[s._v("#")]),s._v(" Linux基于Docker安装开源项目管理禅道")]),s._v(" "),e("h2",{attrs:{id:"什么是禅道"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是禅道"}},[s._v("#")]),s._v(" 什么是禅道")]),s._v(" "),e("p",[s._v("禅道由 青岛易软天创网络科技有限公司开发，国产开源项目管理软件。它集"),e("strong",[s._v("产品管理、项目管理、质量管理、文档管理、组织管理和事务管理于一体")]),s._v("，是一款专业的研发项目管理软件，完整覆盖了研发项目管理的核心流程。禅道管理思想注重实效，功能完备丰富，操作简洁高效，界面美观大方，搜索功能强大，统计报表丰富多样，软件架构合理，扩展灵活，有完善的API可以调用。禅道，专注研发项目管理！")]),s._v(" "),e("p",[s._v("维护部门的项目管理、人员工作合理分配、工作协同等。")]),s._v(" "),e("p",[s._v("有开源版，在本地机房部署或者部署专属云，避免TAPD、teambition等可能的数据泄露问题。")]),s._v(" "),e("p",[s._v("官网：https://www.zentao.net/")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220608182751405.png?aliyun",alt:"image-20220608182751405"}})]),s._v(" "),e("h2",{attrs:{id:"环境介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境介绍"}},[s._v("#")]),s._v(" 环境介绍")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("系统： Centos7\nIP： 192.168.1.4\n安装软件： docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"安装docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[s._v("#")]),s._v(" 安装docker")]),s._v(" "),e("p",[s._v("省略")]),s._v(" "),e("p",[s._v("运行环境需成功部署Docker服务，推荐使用Docker 18版本以上，对主机环境没有要求。")]),s._v(" "),e("p",[s._v("可通过命令查看Docker版本。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker -v\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("禅道镜像已放于Docker Hub上，地址为：https://hub.docker.com/r/easysoft/zentao/tags")]),s._v(" "),e("p",[s._v("可根据所需版本拉取对应版本的镜像，默认latest为禅道开源最新版本。")]),s._v(" "),e("h2",{attrs:{id:"拉取禅道镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拉取禅道镜像"}},[s._v("#")]),s._v(" 拉取禅道镜像：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# docker pull easysoft/zentao:latest\n或者\n# docker pull easysoft/zentao:12.3.3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"docker下安装禅道"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker下安装禅道"}},[s._v("#")]),s._v(" Docker下安装禅道")]),s._v(" "),e("p",[s._v("只要三步")]),s._v(" "),e("h3",{attrs:{id:"一、创建网络"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、创建网络"}},[s._v("#")]),s._v(" 一、创建网络")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker network create --subnet=172.172.172.0/24 zentaonet\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"二、创建目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、创建目录"}},[s._v("#")]),s._v(" 二、创建目录")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mkdir /data/docker/zentao2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"三、启动禅道镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、启动禅道镜像"}},[s._v("#")]),s._v(" 三、启动禅道镜像")]),s._v(" "),e("p",[s._v("启动格式：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker run --name [容器名] \\\n-p [主机端口]:80 \\\n-v [主机禅道目录]:/www/zentaopms \\\n-v [主机mysql目录]:/var/lib/mysql \\\n-e MYSQL_ROOT_PASSWORD=[数据库密码] \\\n-d easysoft/zentao:[镜像标签]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("实际操作")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\ndocker run --name zentao2 \\\n--restart always \\\n-p 8180:80 \\\n-p 3306:3306 \\\n--network=zentaonet --ip 172.172.172.173 \\\n-v /data/docker/zentao2/zentaopms:/www/zentaopms \\\n-v /data/docker/zentao2/mysqldata2:/var/lib/mysql \\\n-e MYSQL_ROOT_PASSWORD=123456 -d easysoft/zentao:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("浏览器访问： http://IP:8180/ 安装禅道")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220608181414648.png?aliyun",alt:"image-20220608181414648"}})]),s._v(" "),e("p",[s._v("生成配置文件：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220608181627766.png?aliyun",alt:"image-20220608181627766"}})]),s._v(" "),e("p",[s._v("安装成功")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220608181647127.png?aliyun",alt:"image-20220608181647127"}})]),s._v(" "),e("p",[s._v("设置账号")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220608181713293.png?aliyun",alt:"image-20220608181713293"}})]),s._v(" "),e("p",[s._v("登录")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220608181732363.png?aliyun",alt:"image-20220608181732363"}})]),s._v(" "),e("p",[s._v("至此，Linux基于Docker安装开源项目管理禅道已经安装完成。")]),s._v(" "),e("h1",{attrs:{id:"其他功能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他功能"}},[s._v("#")]),s._v(" 其他功能")]),s._v(" "),e("h2",{attrs:{id:"nginx反向代理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx反向代理"}},[s._v("#")]),s._v(" NGINX反向代理")]),s._v(" "),e("p",[s._v("不使用IP访问，而使用域名来访问禅道")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("server {\n        listen       80;\n        server_name  job.xgss.net;\n        access_log off;\n        error_log off;\n\n        location / {\n                proxy_pass      http://127.0.0.1:8180;\n                proxy_redirect off;\n                proxy_set_header Host $host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[s._v("将域名解析，或者绑定hosts")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("192.168.1.4 job.xgss.net\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("即可用域名访问")]),s._v(" "),e("h2",{attrs:{id:"将镜像推送到阿里云docker中"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#将镜像推送到阿里云docker中"}},[s._v("#")]),s._v(" 将镜像推送到阿里云docker中")]),s._v(" "),e("p",[s._v("这步是非必须的。")]),s._v(" "),e("p",[s._v("可以这个禅道docker镜像推送到自己的阿里云账号下，下次就可以直接使用，不受官方影响。")]),s._v(" "),e("p",[s._v("下载速度也可以提升。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker tag zentao:latest registry.cn-shenzhen.aliyuncs.com/funet8/zentao:11.4.1\n\n# docker images|grep zentao\nregistry.cn-shenzhen.aliyuncs.com/funet8/zentao                11.4.1              866f4b8173e5        2 years ago         585 MB\nzentao                                                         latest              866f4b8173e5        2 years ago         585 MB\ndocker push registry.cn-shenzhen.aliyuncs.com/funet8/zentao:11.4.1\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("将docker镜像由私有改为公开")]),s._v(" "),e("p",[s._v("https://cr.console.aliyun.com/#/imageList")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20211209170525561.png?aliyun",alt:"image-20211209170525561"}})]),s._v(" "),e("h2",{attrs:{id:"启动禅道"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动禅道"}},[s._v("#")]),s._v(" 启动禅道")]),s._v(" "),e("p",[s._v("使用自己的阿里云docker镜像。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker run --name zentao1 -p 8080:80 \\\n--restart always \\\n-v /data/wwwroot/web/job.chuanqu.ltd:/app/zentaopms \\\n-v /data/mysql/docker_zentao1:/var/lib/mysql \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\n-d registry.cn-shenzhen.aliyuncs.com/funet8/zentao:11.4.1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20211209171719293.png?aliyun",alt:"image-20211209171719293"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20211209171757939.png?aliyun",alt:"image-20211209171757939"}})]),s._v(" "),e("p",[s._v('配置信息已经成功保存到" /app/zentaopms/config/my.php "中。您后面还可继续修改此文件，即可使用禅道。')]),s._v(" "),e("h2",{attrs:{id:"远程登录禅道数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#远程登录禅道数据库"}},[s._v("#")]),s._v(" 远程登录禅道数据库")]),s._v(" "),e("p",[s._v("有时候需要远程修改数据库。")]),s._v(" "),e("p",[s._v("进入docker镜像，再登录mysql数据库，"),e("strong",[s._v("如果开启了注意安全性！")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\n# docker exec -it zentao2 /bin/bash\n修改数据库配置：\nvim /etc/mysql/mariadb.conf.d/50-server.cnf\n将：bind-address           = 127.0.0.1 注释掉：\n# bind-address           = 127.0.0.1\n\n在登录mysql数据库\n# mysql -u root -h 127.0.0.1 -P 3306 -p'123456'\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\n\n使用命令行，新建root权限用户\nmysql> use mysql;\nmysql> update user set password=PASSWORD('123456') where User='star';\nmysql> GRANT ALL PRIVILEGES ON *.* TO 'star'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;\nmysql> FLUSH PRIVILEGES ;\n\n重启docker\ndocker restart zentao2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("p",[s._v("验证数据库是否可以远程连接。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# mysql -u'star' -h'192.168.1.3' -P'3306' -p'123456'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"禅道配置钉钉通知"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#禅道配置钉钉通知"}},[s._v("#")]),s._v(" 禅道配置钉钉通知")]),s._v(" "),e("p",[s._v("钉钉群--\x3e智能群助手---\x3e添加机器人---\x3e自定义")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20211209180408831.png?aliyun",alt:"image-20211209180408831"}})]),s._v(" "),e("p",[s._v("生成hook地址，复制")]),s._v(" "),e("p",[s._v("进入禅道，后台---\x3e通知---\x3ewebhook")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20211209180624395.png?aliyun",alt:"image-20211209180624395"}})]),s._v(" "),e("p",[s._v("测试")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20211209182804297.png?aliyun",alt:"image-20211209182804297"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);