(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{629:function(s,a,t){"use strict";t.r(a);var n=t(17),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_2-安卓项目apk自动打包流程-安装jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安卓项目apk自动打包流程-安装jenkins"}},[s._v("#")]),s._v(" 2.安卓项目APK自动打包流程-安装jenkins")]),s._v(" "),t("h2",{attrs:{id:"jenkins-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-简介"}},[s._v("#")]),s._v(" Jenkins 简介")]),s._v(" "),t("p",[s._v("Jenkins是一个开源的、可扩展的持续集成、交付、部署（软件/代码的编译、打包、部署）的基于web界面的平台。允许持续集成和持续交付项目，无论用的是什么平台，可以处理任何类型的构建或持续集成。")]),s._v(" "),t("p",[s._v("软件开发的流程")]),s._v(" "),t("div",{staticClass:"language-rust line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-rust"}},[t("code",[s._v("编码 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("->")]),s._v(" 构建 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("->")]),s._v(" 集成 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("->")]),s._v(" 测试 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("->")]),s._v(" 交付 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("->")]),s._v(" 部署\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("系统介绍")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("系统： centos7\nIP地址： 192.168.1.8\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"安装java"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装java"}},[s._v("#")]),s._v(" 安装java")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# cd /data/software/\n# wget http://js.funet8.com/centos_software/jdk-8u211-linux-x64.tar.gz\n\n# mkdir /usr/local/java/\n# tar -zxvf jdk-8u211-linux-x64.tar.gz -C /usr/local/java/\n\n配置环境变量\n# vim /etc/profile\n添加：\nexport JAVA_HOME=/usr/local/java/jdk1.8.0_211\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib\nexport PATH=${JAVA_HOME}/bin:$PATH\n\n# source /etc/profile\n\n检查java是否安装成功\nln -s /usr/local/java/jdk1.8.0_171/bin/java /usr/bin/java\njava -version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h2",{attrs:{id:"安装-jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-jenkins"}},[s._v("#")]),s._v(" 安装 Jenkins")]),s._v(" "),t("h3",{attrs:{id:"下载安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载安装"}},[s._v("#")]),s._v(" 下载安装")]),s._v(" "),t("p",[s._v("在这个地址下载 https://jenkins.io/zh/download/ , 如果下载的是 war 包, 直接运行以下命令")]),s._v(" "),t("p",[s._v("下载 Jenkins 的jenkins.war包")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("java -jar /data/software/jenkins.war\n指定端口：\nnohup java -jar /data/software/jenkins.war --ajp13Port=-1 --httpPort=9090 >/dev/null 2>&1 &\n开启防火墙\niptables -I INPUT -p tcp --dport 9090 -j ACCEPT\nservice iptables save\nsystemctl restart iptables.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("在启动Web容器之前设置JENKINS_HOME环境变量")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("用root用户登录，编辑profile文件\nvi /etc/profile\n在最后加入\nexport JENKINS_HOME=/data/jenkins_data\n保存，退出后执行\nsource /etc/profile\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("然后打开浏览器, 进入 localhost:9090 即可开始安装, Jenkins 的安装步骤也没啥难点.")]),s._v(" "),t("p",[s._v("http://192.168.1.8:9090/")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818102226185.png?aliyunoss",alt:"image-20210818102226185"}})]),s._v(" "),t("p",[s._v("下面就是 Jeknins 的界面了,")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818110842688.png?aliyunoss",alt:"image-20210818110842688"}})]),s._v(" "),t("h1",{attrs:{id:"安装插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装插件"}},[s._v("#")]),s._v(" 安装插件")]),s._v(" "),t("p",[s._v("进入菜单 "),t("strong",[s._v("Manage Jenkins => Manage Plugins")]),s._v(", 这个地方就是管理插件的地方, 由于自带的源无法访问, 这里使用下面这个地址, 如果你在浏览器可以打开这个链接, 说明没问题, 否则请自行百度其他源地址")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("http"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mirror"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("esuni"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jenkins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("updates"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("update"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("center"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818111853482.png?aliyunoss",alt:"image-20210818111853482"}})]),s._v(" "),t("p",[s._v("好了, 插件已经可以正常下载了, 以下是需要安装的插件")]),s._v(" "),t("ul",[t("li",[s._v("Git plugin")]),s._v(" "),t("li",[s._v("Localization: Chinese (Simplified)")])]),s._v(" "),t("h1",{attrs:{id:"设定jenkins中文方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设定jenkins中文方法"}},[s._v("#")]),s._v(" 设定Jenkins中文方法")]),s._v(" "),t("p",[s._v("1.进入Manage Jenkins中，点击Manage Plugins（插件设定）")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818111112037.png?aliyunoss",alt:"image-20210818111112037"}})]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("p",[s._v("安装插件“Locale plugin”，虽然这个插件问题比较多，但是这个是Jenkins中唯一可以汉化的插件。")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818111259503.png?aliyunoss",alt:"image-20210818111259503"}})])]),s._v(" "),t("li",[t("p",[s._v("安装中文汉化语言包插件（Localization: Chinese (Simplified)）。")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818111519806.png?aliyunoss",alt:"image-20210818111519806"}})])])]),s._v(" "),t("h1",{attrs:{id:"配置-钉钉-构建通知"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-钉钉-构建通知"}},[s._v("#")]),s._v(" 配置 钉钉 构建通知")]),s._v(" "),t("p",[s._v("在钉钉群中, 进入 "),t("strong",[s._v("群设置 >> 群机器人 >> 添加机器人 >> 添加自定义机器人 >> 配置")]),s._v(" , 添加好后, 在机器人管理中选择添加的机器人, 保存在 webhook 中链接中的 access_token= 后的参数")]),s._v(" "),t("p",[s._v("进入 Jeknins, 在 "),t("strong",[s._v("插件管理")]),s._v(" 中搜索到 "),t("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fplugins.jenkins.io%2Fdingding-json-pusher",target:"_blank",rel:"noopener noreferrer"}},[s._v("Dingding JSON Pusher"),t("OutboundLink")],1),s._v(" 并安装, 安装完后打开项目配置, 在 "),t("strong",[s._v("构建后操作")]),s._v(" 一栏中, 增加构建后的步骤,")]),s._v(" "),t("p",[s._v("进入项目管理, 选择 "),t("strong",[s._v("钉钉通知器配置")]),s._v(" , 参考下图配置, 钉钉access token就填入我们申请的")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/825009-03a4f227d1d14322.png?aliyunoss",alt:"img"}})]),s._v(" "),t("p",[s._v("好了, 每次构建时都将在 钉钉中收到通知了")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/825009-9fee83511195e437.png?aliyunoss",alt:"img"}})]),s._v(" "),t("h2",{attrs:{id:"新版钉钉通知"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新版钉钉通知"}},[s._v("#")]),s._v(" 新版钉钉通知")]),s._v(" "),t("p",[s._v("我的Jenkins版本是V2.204.1，需要安装的插件：")]),s._v(" "),t("p",[s._v("DingTalk Plugin")]),s._v(" "),t("p",[s._v("在 系统管理 > 系统设置 > 钉钉配置 中添加机器人")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818132241196.png?aliyunoss",alt:"image-20210818132241196"}})]),s._v(" "),t("p",[s._v("在项目中配置：")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818132339518.png?aliyunoss",alt:"image-20210818132339518"}})]),s._v(" "),t("p",[s._v("在钉钉群中有相关通知")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818132438299.png?aliyunoss",alt:"image-20210818132438299"}})]),s._v(" "),t("h2",{attrs:{id:"jenkins整合dingding-json-pusher-发送自定义消息到钉钉群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins整合dingding-json-pusher-发送自定义消息到钉钉群"}},[s._v("#")]),s._v(" Jenkins整合dingding json pusher，发送自定义消息到钉钉群")]),s._v(" "),t("p",[s._v("1、下载钉钉，建群，添加机器人，获得access_token；\n2、下载插件\n主页面-系统管理-管理插件-可选插件 搜Dingding JSON Pusher Plugin\n3、其他项目配置完成后，添加构建后操作，选择Dingding JSON Pusher\n4、钉钉access token填入access_token，不是整个路径只是路径后的access_token的值,比如\nhttps://oapi.dingtalk.com/robot/send?access_token=xxxxxxxx,要填入的是xxxxxxxx；\n5、Json文件路径，全路径，比如 /data/jenkins_data/workspace/android-test1/dingding.json\n6、Json文件内容格式如下：\n{ “msgtype”: “text”, “text”: {“content”: “在这填写自定义内容”}}")]),s._v(" "),t("p",[s._v("参考")]),s._v(" "),t("p",[s._v("https://blog.csdn.net/Ever69/article/details/84453896")]),s._v(" "),t("p",[s._v("使用Jenkins构建Android项目：https://www.jianshu.com/p/c9703b83ff4b")])])}),[],!1,null,null,null);a.default=e.exports}}]);