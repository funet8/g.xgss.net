(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{692:function(a,s,t){"use strict";t.r(s);var e=t(17),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"传趣控股使用apollo场景与规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#传趣控股使用apollo场景与规范"}},[a._v("#")]),a._v(" 传趣控股使用Apollo场景与规范")]),a._v(" "),t("h1",{attrs:{id:"使用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[a._v("#")]),a._v(" 使用场景")]),a._v(" "),t("ol",[t("li",[a._v("后端PHP开发配置：在开发开发环境、测试环境、生产环境的配置，不同环境读取不同配置（数据库、redis、域名等）。")]),a._v(" "),t("li",[a._v("后端PHP开发配置：由于业务需求，需要修改某个游戏上线、下线；切换游戏充值渠道等，则不需要修改代码，读取Apollo后台配置即可（开发后台功能）。")]),a._v(" "),t("li",[a._v("移动开发安卓、IOS客户端开发中：本地开发读取apim.chuanqu.ltd，生成环境上线读取apim.chuanqu.com")]),a._v(" "),t("li",[a._v("移动开发安卓、IOS客户端开发中：应用读取不同的域名，比如apollo后台配置接口域名（apim.chuanqu.com），由于某些主动或者被动的原因需要更改接口域名，实现动态配置域名的功能。")]),a._v(" "),t("li",[a._v("前端开发： 可以修改前端配置，是否显示开关、是否跳转等等。")]),a._v(" "),t("li",[a._v("运维方面： 在公司机房、阿里云服务器、腾讯云服务器（开发、测试、生成环境）环境拉取不同的配置，无需修改多个配置文件。")]),a._v(" "),t("li",[a._v("测试方面：可以利用灰度发布，指定集群中的某一台作为灰度发布机，")])]),a._v(" "),t("h1",{attrs:{id:"使用规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用规范"}},[a._v("#")]),a._v(" 使用规范")]),a._v(" "),t("p",[a._v("1.如果通过HTTP接口接入、必须使用https、并且启用密钥（后台---\x3e应用---\x3e管理密钥）")]),a._v(" "),t("p",[t("strong",[a._v("2.生产环境应用必须启用密钥")])]),a._v(" "),t("p",[a._v("3.轮询时间不易过短，客户端主动请求接口，5分钟-30分钟，如果客户端过多会对服务器造成压力，而配置几乎改动很少，移动APP端启动时判断更新。")]),a._v(" "),t("p",[a._v("4.由于Apollo接口需要网络支持，要考虑客户端如果断网，配置默认值。")]),a._v(" "),t("p",[a._v("5.应用的命名规则要明确功能。")]),a._v(" "),t("p",[a._v("6.清晰的文档，充分测试。项目要有清晰的文档记录，充分测试并且通过审核，才能上线、上架、并且做好项目记录的文档，确保上线功能正常可以灵活切换。")]),a._v(" "),t("p",[a._v("7.新增、修改配置需要点“发布”才能生效。")]),a._v(" "),t("p",[a._v("8.必须要有工作流，暂定工作流：（开发提交---\x3e主管审核---\x3e技术总监发布，运维提交---\x3e技术总监发布）")]),a._v(" "),t("h1",{attrs:{id:"应用命名规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#应用命名规则"}},[a._v("#")]),a._v(" 应用命名规则")]),a._v(" "),t("h2",{attrs:{id:"应用名称规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#应用名称规则"}},[a._v("#")]),a._v(" 应用名称规则")]),a._v(" "),t("p",[a._v("进入后台---\x3e创建应用")]),a._v(" "),t("p",[a._v("项目主体+部门+功能")]),a._v(" "),t("p",[a._v("示例：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("chuanqu-frontend\nchuanqu-web-php\nchuanqu-web-php-apim.chuanqu.com\nchuanqu-ios\nchuanqu-android\nchuanqu-yunwei-demo\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220401162720671.png?aliyun",alt:"image-20220401162720671"}})]),a._v(" "),t("h2",{attrs:{id:"集群命名规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集群命名规则"}},[a._v("#")]),a._v(" 集群命名规则")]),a._v(" "),t("p",[a._v("进入应用---\x3e添加集群")]),a._v(" "),t("p",[a._v("功能-环境")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("default        （系统默认环境-可删除）\ndev-localhost  （本地开发环境）\ndev-test       （本地测试环境）\naliyun-online   （阿里云-生产环境）\ntengxun-online  （腾讯云-生产环境）\nshijihulian-online （世纪互联机房-生产环境）\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220401165922489.png?aliyun",alt:"image-20220401165922489"}})]),a._v(" "),t("h2",{attrs:{id:"namespace命名空间规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#namespace命名空间规则"}},[a._v("#")]),a._v(" Namespace命名空间规则")]),a._v(" "),t("p",[a._v("进入应用---\x3e添加集群")]),a._v(" "),t("h3",{attrs:{id:"创建私有命名空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建私有命名空间"}},[a._v("#")]),a._v(" 创建私有命名空间")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220401172312611.png?aliyun",alt:"image-20220401172312611"}})]),a._v(" "),t("h3",{attrs:{id:"创建公共命名空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建公共命名空间"}},[a._v("#")]),a._v(" 创建公共命名空间")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220401172606422.png?aliyun",alt:"image-20220401172606422"}})]),a._v(" "),t("p",[a._v("总结：我在A应用中创建了一个公共的命名空间web-public，在B应用中可以应用这个一个关联命名空间。")]),a._v(" "),t("p",[a._v("在A应用中修改web-public，则B中的web-public配置则对应的会改变。")]),a._v(" "),t("p",[t("strong",[a._v("一般创建私有空间")])]),a._v(" "),t("h3",{attrs:{id:"创建关联命名空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建关联命名空间"}},[a._v("#")]),a._v(" 创建关联命名空间")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220401172959045.png?aliyun",alt:"image-20220401172959045"}})]),a._v(" "),t("h3",{attrs:{id:"配置名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置名"}},[a._v("#")]),a._v(" 配置名")]),a._v(" "),t("p",[a._v("配置名则跟应用程序（代码）中的配置命名一致即可")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220401174704967.png?aliyun",alt:"image-20220401174704967"}})]),a._v(" "),t("h1",{attrs:{id:"传趣apollo地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#传趣apollo地址"}},[a._v("#")]),a._v(" 传趣Apollo地址")]),a._v(" "),t("p",[a._v("测试环境：")]),a._v(" "),t("p",[t("strong",[a._v("仅作本地项目测试用，不要用于生产环境")])]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("接口地址：\nhttp://apollo.chuanqu.ltd/\n\n后台地址：\nhttp://apollo-houtai.chuanqu.ltd/\n\n测试用户：\ntest\n123456\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("p",[a._v("正式环境：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("接口地址：\nhttps://apollo.chuanqu.com/\n\n后台地址：\nhttp://apollo-houtai.chuanqu.com/\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("h1",{attrs:{id:"apollo客户端接入使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apollo客户端接入使用"}},[a._v("#")]),a._v(" Apollo客户端接入使用")]),a._v(" "),t("h2",{attrs:{id:"java客户端使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java客户端使用"}},[a._v("#")]),a._v(" "),t("a",{attrs:{href:"https://www.apolloconfig.com/#/zh/usage/java-sdk-user-guide",target:"_blank",rel:"noopener noreferrer"}},[a._v("JAVA客户端使用"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"go、python、nodejs、php客户端使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go、python、nodejs、php客户端使用"}},[a._v("#")]),a._v(" "),t("a",{attrs:{href:"https://www.apolloconfig.com/#/zh/usage/third-party-sdks-user-guide",target:"_blank",rel:"noopener noreferrer"}},[a._v("Go、python、nodejs、PHP客户端使用"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"其他客户端-http接口使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他客户端-http接口使用"}},[a._v("#")]),a._v(" "),t("a",{attrs:{href:"https://www.apolloconfig.com/#/zh/usage/other-language-client-user-guide",target:"_blank",rel:"noopener noreferrer"}},[a._v("其他客户端-HTTP接口使用"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[a._v("#")]),a._v(" "),t("a",{attrs:{href:"https://www.apolloconfig.com/#/zh/usage/other-language-client-user-guide?id=_123-%E6%B5%8B%E8%AF%95",target:"_blank",rel:"noopener noreferrer"}},[a._v("测试"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("由于是Http接口，所以在URL组装OK之后，直接通过浏览器、或者相关的http接口测试工具访问即可。")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("{config_server_url}/configfiles/json/{appId}/{clusterName}/{namespaceName}?ip={clientIp}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('# curl http://apollo.chuanqu.ltd/configfiles/json/chuanqu-yunwei-demo/aliyun-online/team3.web-public\n{"love":"888888","test1":"bbbbbbb"}\n\n# curl http://apollo.chuanqu.ltd/configfiles/json/chuanqu-yunwei-demo/dev-test/team3.web-public\n{"test1":"bbbbbbb"}\n\n# curl http://apollo.chuanqu.ltd/configfiles/json/chuanqu-yunwei-demo/default/team3.web-public\n{"a":"bbbbbbbbbbbbbb","test1":"bbbbbbb"}\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);