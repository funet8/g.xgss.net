(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{718:function(s,t,a){"use strict";a.r(t);var e=a(17),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"开源项目搭建中国裁判文书网本地搜索web系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开源项目搭建中国裁判文书网本地搜索web系统"}},[s._v("#")]),s._v(" 开源项目搭建中国裁判文书网本地搜索WEB系统")]),s._v(" "),a("p",[s._v("2023年12月听新闻说裁判文书网将不再对公众开放，对于这个消息对于中国法制进程影响可谓深远。")]),s._v(" "),a("p",[s._v("今天在github上看到一个开源项目，中国裁判文书网本地搜索，处于好奇在本地搭建试一下，能否跑起来。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/cncases/cases",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/cncases/cases"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("img",{attrs:{src:"https://imgoss.xgss.net/picgo/caipanwenshuwang.jpg?aliyun",alt:"caipanwenshuwang"}})]),s._v(" "),a("h2",{attrs:{id:"下载原始数据-102g"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载原始数据-102g"}},[s._v("#")]),s._v(" 下载原始数据（102G）")]),s._v(" "),a("p",[s._v("方法：通过bt下载，种子文件为 810air.torrent ，可以从本仓库下载，也可以通过链接 "),a("a",{attrs:{href:"https://files.catbox.moe/810air.torrent",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://files.catbox.moe/810air.torrent"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("原始数据来源于"),a("a",{attrs:{href:"https://www.macrodatas.cn/article/1147471898",target:"_blank",rel:"noopener noreferrer"}},[s._v("马克数据网"),a("OutboundLink")],1),s._v("，文书数量超过8500万，约102G。下载后不要解压子文件，将文件路径填写到 config.toml 中的 raw_data_path 变量中；")]),s._v(" "),a("p",[s._v("我这边用迅雷下载，大概95G")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240130141708576.png?aliyun",alt:"image-20240130141708576"}})]),s._v(" "),a("h2",{attrs:{id:"下载程序并创建配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载程序并创建配置文件"}},[s._v("#")]),s._v(" 下载程序并创建配置文件")]),s._v(" "),a("p",[s._v("从 releases 页面下载已编译好的二进制文件（推荐），https://github.com/cncases/cases/releases")]),s._v(" "),a("p",[s._v("我用的系统是windows，所以下载的是 v0.0.5-x86_64-pc-windows-msvc.zip")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240130141910186.png?aliyun",alt:"image-20240130141910186"}})]),s._v(" "),a("h2",{attrs:{id:"测试系统配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试系统配置"}},[s._v("#")]),s._v(" 测试系统配置")]),s._v(" "),a("p",[s._v("系统： windows11 专业版")]),s._v(" "),a("p",[s._v("CPU: i5-10400F CPU @ 2.90GHz")]),s._v(" "),a("p",[s._v("内存：24G")]),s._v(" "),a("p",[s._v("硬盘： 1T机械硬盘 (至少要有500G的空余空间)")]),s._v(" "),a("h2",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[s._v("#")]),s._v(" 配置文件")]),s._v(" "),a("p",[s._v("参考配置文件： https://github.com/cncases/cases/blob/main/config.toml")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('配置文件参考config.toml\n\ndb = "./rocksdb"  # path to store rocksdb\nindex_path ="./search_index"  # path to store index\nindex_with_full_text = false  # whether establish full-text index\naddr = "127.0.0.1:8081" # If allow LAN access, change it to "0.0.0.0:port".\n\n# The raw data path you downloaded from the torrent, and you must NOT unzip it. 注意路径\nraw_data_path = "./"\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"将数据加载到-rocksdb-数据库中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将数据加载到-rocksdb-数据库中"}},[s._v("#")]),s._v(" 将数据加载到 rocksdb 数据库中")]),s._v(" "),a("p",[s._v("运行 "),a("code",[s._v("convert config.toml")]),s._v(" 程序。此过程会将原始数据放入 rocksdb 数据库中，数据库文件路径为 "),a("code",[s._v("config.toml")]),s._v(" 中的 "),a("code",[s._v("db")]),s._v(" 变量；转换后的数据大小约为 200G，转换可能会花费数小时的时间；如果中途中断，再次运行会从中断处继续。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ ./convert.exe config.toml\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240130142749752.png?aliyun",alt:"image-20240130142749752"}})]),s._v(" "),a("p",[s._v("系统资源占用情况")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240130143052227.png?aliyun",alt:"image-20240130143052227"}})]),s._v(" "),a("p",[s._v("开始时间： 14:30")]),s._v(" "),a("p",[s._v("结束时间：17:00")]),s._v(" "),a("p",[s._v("一共两个半小时，根据个人系统配置高低有关系。")]),s._v(" "),a("p",[s._v("生成rocksdb目录有184G大小。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240130170639698.png?aliyun",alt:"image-20240130170639698"}})]),s._v(" "),a("h2",{attrs:{id:"创建索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建索引"}},[s._v("#")]),s._v(" 创建索引")]),s._v(" "),a("p",[s._v("运行 "),a("code",[s._v("index config.toml")]),s._v(" 程序会将数据库中的数据创建索引，索引文件路径为 "),a("code",[s._v("config.toml")]),s._v(" 中的 "),a("code",[s._v("index_path")]),s._v(" 变量；如果中途中断，需要删除 "),a("code",[s._v("index_path")]),s._v(" 中的文件，重新运行 "),a("code",[s._v("index")]),s._v(" 程序；默认情况下，不会索引案件内容，索引大小约为 15.5G，可能会花费数小时的时间。如果需要索引案件内容，需要将index.toml中的 "),a("code",[s._v("index_with_full_text")]),s._v(" 设置为 "),a("code",[s._v("true")]),s._v("，但是这会使索引文件增加到150G左右，索引时间也会增加到十几个小时。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ ./index.exe config.toml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240130170717992.png?aliyun",alt:"image-20240130170717992"}})]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("开始时间： 2024-01-30 09:07:18\n结束时间： 2024-02-01 03:14:18\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("一共花费了70多个小时")]),s._v(" "),a("p",[s._v("生成search_index目录有15.4G大小。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240201134120524.png?aliyun",alt:"image-20240201134120524"}})]),s._v(" "),a("h2",{attrs:{id:"运行搜索服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行搜索服务"}},[s._v("#")]),s._v(" 运行搜索服务")]),s._v(" "),a("p",[s._v("运行 "),a("code",[s._v("main config.toml")]),s._v(" 程序，用浏览器打开"),a("code",[s._v("config.toml")]),s._v("网址，即可搜索。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ ./main.exe config.toml\n2024-02-01T05:38:57.369799Z  INFO main: listening on http://127.0.0.1:8081\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("浏览器访问： http://127.0.0.1:8081")]),s._v(" "),a("p",[s._v("访问截图")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240201134047893.png?aliyun",alt:"image-20240201134047893"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240201134815603.png?aliyun",alt:"image-20240201134815603"}})]),s._v(" "),a("p",[s._v("至此，开源项目搭建中国裁判文书网本地搜索WEB系统完成。")])])}),[],!1,null,null,null);t.default=n.exports}}]);