(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{719:function(s,a,e){"use strict";e.r(a);var t=e(17),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"开源项目messagenest打造个性化消息推送平台多种通知方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开源项目messagenest打造个性化消息推送平台多种通知方式"}},[s._v("#")]),s._v(" 开源项目MessageNest打造个性化消息推送平台多种通知方式")]),s._v(" "),e("p",[s._v("今天介绍一个开源项目，Message Nest - 可以打造个性化消息推送平台，整合邮件、钉钉、企业微信等多种通知方式。定制你的消息，让通知方式更灵活多样。")]),s._v(" "),e("p",[s._v("开源地址： https://github.com/engigu/Message-Push-Nest")]),s._v(" "),e("h2",{attrs:{id:"测试平台"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试平台"}},[s._v("#")]),s._v(" 测试平台")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("系统： centos7\nIP: 192.168.1.15\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/kaiyuanxiangmugexinghuaxm.jpg?aliyun",alt:"kaiyuanxiangmugexinghuaxm"}})]),s._v(" "),e("h2",{attrs:{id:"安装messagenest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装messagenest"}},[s._v("#")]),s._v(" 安装MessageNest")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@node15]# mkdir /data/MessageNest/\n# cd /data/MessageNest/\n[root@node15 MessageNest]# wget https://github.com/engigu/Message-Push-Nest/releases/download/v0.1.0/Message-Nest_Linux_x86_64.tar.gz\n[root@node15 MessageNest]# tar -zxvf Message-Nest_Linux_x86_64.tar.gz \n\n[root@node15 MessageNest]# ll\ntotal 20652\ndrwxr-xr-x 2 root root         21 Jan 26 15:33 conf\n-rw-r--r-- 1 1001 docker     1116 Jan 26 15:20 LICENSE\n-rw-r--r-- 1 root root    5914641 Jan 26 15:30 Message-Nest_Linux_x86_64.tar.gz\n-rwxr-xr-x 1 1001 docker 15216640 Jan 26 15:21 Message-Push-Nest\n-rw-r--r-- 1 1001 docker     4692 Jan 26 15:20 README.md\n\n# mv conf/app.example.ini conf/app.ini\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h2",{attrs:{id:"数据库配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库配置"}},[s._v("#")]),s._v(" 数据库配置：")]),s._v(" "),e("p",[s._v("我本地已经有安装mysql，如果没有还需要安装，安装教程自行度娘。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("数据库地址： 192.168.1.8:61922\n用户： message-user\n密码： 123456\n库名： messagenest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"修改配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改配置"}},[s._v("#")]),s._v(" 修改配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vim conf/app.ini\n\n[app]\nJwtSecret = message-nest\nRuntimeRootPath = runtime/\nLogLevel = INFO\n\n; init table data, first run set enable\nInitData = enable\n\n[server]\n; debug or release\nRunMode = release\nHttpPort = 8000\nReadTimeout = 60\nWriteTimeout = 60\n; use embed html static file\n; EmbedHtml = disable\n\n[database]\nType = mysql\nUser = message-user\nPassword = 123456\nHost = 192.168.1.8\nName = messagenest\nPort = 61922\nTablePrefix = message_\n; SqlDebug = enable\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br")])]),e("h2",{attrs:{id:"启动message-nest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动message-nest"}},[s._v("#")]),s._v(" 启动Message-Nest")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("直接运行软件，会输出信息\n\n# ./Message-Push-Nest \n2024/01/26 15:46:00 [info] replacing callback `gorm:update_time_stamp` from /home/runner/work/Message-Push-Nest/Message-Push-\n.....\n[2024-01-26 15:46:00.495]  INFO [main.go:50 main] [PID:504]: start message server @ http://0.0.0.0:8000\n\n后台运行：\nnohup ./Message-Push-Nest  >/dev/null 2> Message-Push-Nest.log &\n查看日志：\ntail -f Message-Push-Nest.log \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h1",{attrs:{id:"进入后台"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入后台"}},[s._v("#")]),s._v(" 进入后台")]),s._v(" "),e("p",[s._v("浏览器输入 http://192.168.1.15:8000")]),s._v(" "),e("p",[s._v("默认用户名： admin")]),s._v(" "),e("p",[s._v("密码： 123456")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126161317417.png?aliyun",alt:"image-20240126161317417"}})]),s._v(" "),e("h1",{attrs:{id:"钉钉群新建机器人"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#钉钉群新建机器人"}},[s._v("#")]),s._v(" 钉钉群新建机器人")]),s._v(" "),e("p",[s._v("记住： Webhook 和 加签")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126161507956.png?aliyun",alt:"image-20240126161507956"}})]),s._v(" "),e("h1",{attrs:{id:"添加钉钉渠道"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加钉钉渠道"}},[s._v("#")]),s._v(" 添加钉钉渠道")]),s._v(" "),e("p",[s._v("再进入Message-Nest后台添加发信渠道")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126161422005.png?aliyun",alt:"image-20240126161422005"}})]),s._v(" "),e("p",[s._v("测试成功")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126161643016.png?aliyun",alt:"image-20240126161643016"}})]),s._v(" "),e("h1",{attrs:{id:"添加邮箱渠道"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加邮箱渠道"}},[s._v("#")]),s._v(" 添加邮箱渠道")]),s._v(" "),e("p",[s._v("注意邮箱密码是登录密码，不要泄露了。")]),s._v(" "),e("p",[s._v("而且需要开通IMAP/SMTP服务。")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126162044753.png?aliyun",alt:"image-20240126162044753"}})]),s._v(" "),e("h1",{attrs:{id:"发信任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#发信任务"}},[s._v("#")]),s._v(" 发信任务")]),s._v(" "),e("p",[s._v("新增任务")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126163008218.png?aliyun",alt:"image-20240126163008218"}})]),s._v(" "),e("p",[s._v("点击 暂存，确定添加")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126163051602.png?aliyun",alt:"image-20240126163051602"}})]),s._v(" "),e("h1",{attrs:{id:"测试发送"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试发送"}},[s._v("#")]),s._v(" 测试发送")]),s._v(" "),e("p",[s._v("点击 接口")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126163123208.png?aliyun",alt:"image-20240126163123208"}})]),s._v(" "),e("p",[s._v("一个任务可能关联多个不同渠道的实例\n实例的内容类型大体上可以可以分为text、html、markdown\n发送的消息会优先选择相应的类型消息进行发送，如果没有，将使用传的text消息进行发送\n** text节点必传，指定mode=sync将同步发送，默认异步发送")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# curl -X POST --location \'http://192.168.1.15:8000/api/v1/message/send\' \\\n        --header \'Content-Type: application/json\' \\\n        --data \'{\n    "task_id": "T-yejHQOGXo9",\n    "title": "message title",\n    "text": "测试内容Hello World!"\n}\'\n\n用linux服务器执行这个命令\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126163255255.png?aliyun",alt:"image-20240126163255255"}})]),s._v(" "),e("h2",{attrs:{id:"钉钉上收到通知"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#钉钉上收到通知"}},[s._v("#")]),s._v(" 钉钉上收到通知")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126163312464.png?aliyun",alt:"image-20240126163312464"}})]),s._v(" "),e("h1",{attrs:{id:"发信日志界面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#发信日志界面"}},[s._v("#")]),s._v(" 发信日志界面")]),s._v(" "),e("p",[s._v("有刚才的发送记录")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240126163408168.png?aliyun",alt:"image-20240126163408168"}})]),s._v(" "),e("h1",{attrs:{id:"数据统计界面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据统计界面"}},[s._v("#")]),s._v(" 数据统计界面")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20240131141611219.png?aliyun",alt:"image-20240131141611219"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);