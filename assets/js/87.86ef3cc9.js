(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{673:function(s,a,t){"use strict";t.r(a);var e=t(17),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"群晖nas配置之zerotier实现内网穿透"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#群晖nas配置之zerotier实现内网穿透"}},[s._v("#")]),s._v(" 群晖NAS配置之ZeroTier实现内网穿透")]),s._v(" "),t("h1",{attrs:{id:"前言-内网穿透"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言-内网穿透"}},[s._v("#")]),s._v(" 前言-内网穿透")]),s._v(" "),t("p",[s._v("内网穿透是指通过一种技术让外部网络可以访问到内网的NAS设备，这样即使在不同网络环境下，也能够远程访问和管理NAS设备。以下是一些常见的内网穿透方案：")]),s._v(" "),t("h2",{attrs:{id:"synology官方提供的quickconnect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#synology官方提供的quickconnect"}},[s._v("#")]),s._v(" Synology官方提供的QuickConnect")]),s._v(" "),t("p",[s._v("Synology官方提供了QuickConnect服务，可以通过Synology账号远程访问NAS设备。用户可以在NAS控制面板中设置和管理QuickConnect服务，使其在不同网络环境下访问NAS变得更加简单。")]),s._v(" "),t("h2",{attrs:{id:"synology的ddns服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#synology的ddns服务"}},[s._v("#")]),s._v(" Synology的DDNS服务")]),s._v(" "),t("p",[s._v("Synology NAS支持使用DDNS（动态域名解析）服务，可以为NAS设备设置一个动态域名，使用户可以通过域名访问NAS，而不必担心动态IP地址变化带来的问题。")]),s._v(" "),t("h2",{attrs:{id:"vpn-虚拟专用网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vpn-虚拟专用网络"}},[s._v("#")]),s._v(" VPN（虚拟专用网络）")]),s._v(" "),t("p",[s._v("通过在路由器上设置VPN服务器，或者使用NAS自身的VPN服务，可以建立安全的远程连接，让用户远程访问内网资源，包括NAS设备。")]),s._v(" "),t("h2",{attrs:{id:"端口转发-端口映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口转发-端口映射"}},[s._v("#")]),s._v(" 端口转发/端口映射")]),s._v(" "),t("p",[s._v("在路由器上设置端口转发（或称端口映射），将指定端口的流量转发到NAS设备上，这样用户就可以通过特定端口来访问NAS。但要确保端口转发时考虑到安全性，避免暴露不必要的服务或端口。")]),s._v(" "),t("h2",{attrs:{id:"第三方内网穿透服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三方内网穿透服务"}},[s._v("#")]),s._v(" 第三方内网穿透服务")]),s._v(" "),t("p",[s._v("使用类似于ngrok、frp、ZeroTier等第三方工具或服务进行内网穿透，这些服务可以帮助用户将内网设备暴露到公网上，但需要注意安全性和隐私保护。")]),s._v(" "),t("p",[s._v("这篇文章就来介绍ZeroTier实现内网穿透，ZeroTier异地组网是一个非常不错的内网穿透方式，特点就是免费，不限流。")]),s._v(" "),t("p",[s._v("缺点是免费用户只有25个")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/zerotier-pic.jpg?aliyun",alt:"zerotier-pic"}})]),s._v(" "),t("h1",{attrs:{id:"步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[s._v("#")]),s._v(" 步骤")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("注册ZeroTier账号")])]),s._v(" "),t("li",[t("p",[s._v("群晖Nas中配置ZeroTier")])]),s._v(" "),t("li",[t("p",[s._v("安装ZeroTier客户端")])])]),s._v(" "),t("h1",{attrs:{id:"注册zerotier账号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注册zerotier账号"}},[s._v("#")]),s._v(" 注册ZeroTier账号")]),s._v(" "),t("p",[s._v("进入ZeroTier官网，注册账号 https://www.zerotier.com/")]),s._v(" "),t("p",[s._v("创建网络")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231123174454849.png?aliyun",alt:"image-20231123174454849"}})]),s._v(" "),t("p",[s._v("点击：create a network")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231123175043351.png?aliyun",alt:"image-20231123175043351"}})]),s._v(" "),t("h1",{attrs:{id:"群晖nas中配置zerotier"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#群晖nas中配置zerotier"}},[s._v("#")]),s._v(" 群晖Nas中配置ZeroTier")]),s._v(" "),t("p",[s._v("群晖DSM6.X下载相关套件安装以后要加入网络然后授权即可，DSM7.0以上可以使用第三方套件或者docker，这里我们使用官方推荐的docker方式。")]),s._v(" "),t("h2",{attrs:{id:"创建目录zerotier"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建目录zerotier"}},[s._v("#")]),s._v(" 创建目录ZeroTier")]),s._v(" "),t("p",[s._v("登录群辉，打开File Station，在docker目录下新建文件夹并重命名为ZeroTier，然后赋予读写权限。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231123194007723.png?aliyun",alt:"image-20231123194007723"}})]),s._v(" "),t("h2",{attrs:{id:"拉取镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[s._v("#")]),s._v(" 拉取镜像")]),s._v(" "),t("p",[s._v("由于我的docker镜像注册表失败，本文用ssh登录操作，不在nas的docker操作。")]),s._v(" "),t("p",[s._v("如果没有的话请在套件中心进行下载→注册表→搜索 zerotier-synology 双击选择最新版本下载")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("root@star-nas:~# docker pull zerotier/zerotier-synology\nUsing default tag: latest\nlatest: Pulling from zerotier/zerotier-synology\n63b65145d645: Pull complete \nfb097512307f: Pull complete \nfb0fa1a4a4a5: Pull complete \n646d6766cba7: Pull complete \nf49b23d91910: Pull complete \n87ef921da0c2: Pull complete \nDigest: sha256:9adf1cb6e8b0ca8f80d28d2a7c4cfa18d102552a13a7f6f1b7923d75da408a07\nStatus: Downloaded newer image for zerotier/zerotier-synology:latest\ndocker.io/zerotier/zerotier-synology:latest\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124093751745.png?aliyun",alt:"image-20231124093751745"}})]),s._v(" "),t("h2",{attrs:{id:"创建一个持久的-tun"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建一个持久的-tun"}},[s._v("#")]),s._v(" 创建一个持久的 TUN")]),s._v(" "),t("p",[s._v("参考： https://docs.zerotier.com/synology/")]),s._v(" "),t("p",[s._v("使用vi工具编写脚本到路径: /usr/local/etc/rc.d/tun.sh 这将使得 /dev/net/tun 在启动时调用")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# echo -e '#!/bin/sh' >> /usr/local/etc/rc.d/tun.sh\n# echo -e 'insmod /lib/modules/tun.ko' > /usr/local/etc/rc.d/tun.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("给这段脚本添加权限（其实应该先vi这个空的脚本，然后添加权限，最后在写入上面的脚本内容，不然会提示你readonly）\n# chmod a+x /usr/local/etc/rc.d/tun.sh\n运行脚本：\n# /usr/local/etc/rc.d/tun.sh\n\n检查TUN的运行状态（可选）：\n# ls /dev/net/tun\n/dev/net/tun\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"启动镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动镜像"}},[s._v("#")]),s._v(" 启动镜像")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# docker run -d \\\n--name zerotier \\\n--restart=always \\\n--net=host \\\n--device=/dev/net/tun \\\n--cap-add=NET_ADMIN \\\n--cap-add=SYS_ADMIN \\\n-v /volume1/docker/ZeroTier:/var/lib/zerotier-one \\\nzerotier/zerotier-synology\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h2",{attrs:{id:"加入网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#加入网络"}},[s._v("#")]),s._v(" 加入网络")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("命令： docker exec -it <docker容器的名字> zerotier-cli join <替换zerotier的网络ID>\n\n# docker exec -it zerotier zerotier-cli join 123456789\n200 join OK\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124104652623.png?aliyun",alt:"image-20231124104652623"}})]),s._v(" "),t("p",[s._v("如果不是200 join ok，择要看看你的docker日志")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# docker logs zerotier\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("p",[s._v("在 ZeroTier 后台授权当前设备，然后查看状态：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# docker exec -it zerotier zerotier-cli listnetworks\n200 listnetworks <nwid> <name> <mac> <status> <type> <dev> <ZT assigned ips>\n200 listnetworks 1c33c1ced0cfbfc5  c6:c3:ed:5e:04:17 ACCESS_DENIED PRIVATE zt2lrq44iv -\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h1",{attrs:{id:"zerotier官网网络授权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zerotier官网网络授权"}},[s._v("#")]),s._v(" zerotier官网网络授权")]),s._v(" "),t("p",[s._v("zerotier 官网，登录以后进入配置界面，在页面最下面对已经出现的设备进行授权，授权的方式为在□中打上√，取消打√即为取消授权。（如果没出现请稍等几秒之后刷新界面）")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124103928771.png?aliyun",alt:"image-20231124103928771"}})]),s._v(" "),t("p",[s._v("在 Auth这里打钩")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124104036709.png?aliyun",alt:"image-20231124104036709"}})]),s._v(" "),t("h1",{attrs:{id:"客户端安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户端安装"}},[s._v("#")]),s._v(" 客户端安装")]),s._v(" "),t("p",[s._v("ZeroTier客户端支持 苹果IOS，苹果MAC，安卓，微软的Windows和linux等常用的系统，本文只介绍Windows和安卓")]),s._v(" "),t("h2",{attrs:{id:"windows系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows系统"}},[s._v("#")]),s._v(" Windows系统")]),s._v(" "),t("h3",{attrs:{id:"_1-下载windows软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载windows软件"}},[s._v("#")]),s._v(" 1.下载Windows软件")]),s._v(" "),t("p",[s._v("去官网下载：https://www.zerotier.com/download/")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124102330369.png?aliyun",alt:"image-20231124102330369"}})]),s._v(" "),t("h3",{attrs:{id:"_2-输入网络id"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-输入网络id"}},[s._v("#")]),s._v(" 2.输入网络ID")]),s._v(" "),t("p",[s._v("安装之后，在电脑右下角输入Network ID")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124102522297.png?aliyun",alt:"image-20231124102522297"}})]),s._v(" "),t("p",[s._v("Windows系统的ip是：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124105342063.png?aliyun",alt:"image-20231124105342063"}})]),s._v(" "),t("h3",{attrs:{id:"_3-测试访问nas"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-测试访问nas"}},[s._v("#")]),s._v(" 3.测试访问NAS")]),s._v(" "),t("p",[s._v("如图访问成功，则说明zerotier组成的VPN网络成功。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124103358912.png?aliyun",alt:"image-20231124103358912"}})]),s._v(" "),t("h2",{attrs:{id:"安卓系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安卓系统"}},[s._v("#")]),s._v(" 安卓系统")]),s._v(" "),t("h3",{attrs:{id:"_1-安装zerotier的手机app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装zerotier的手机app"}},[s._v("#")]),s._v(" 1.安装ZeroTier的手机APP")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124111017541.png?aliyun",alt:"image-20231124111017541"}})]),s._v(" "),t("h3",{attrs:{id:"_2-添加网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-添加网络"}},[s._v("#")]),s._v(" 2.添加网络")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124111057862.png?aliyun",alt:"image-20231124111057862"}})]),s._v(" "),t("h3",{attrs:{id:"_3-填写网络id"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-填写网络id"}},[s._v("#")]),s._v(" 3.填写网络ID")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124111125012.png?aliyun",alt:"image-20231124111125012"}})]),s._v(" "),t("h3",{attrs:{id:"_4-测试访问nas"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-测试访问nas"}},[s._v("#")]),s._v(" 4.测试访问Nas")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20231124111143526.png?aliyun",alt:"image-20231124111143526"}})]),s._v(" "),t("h1",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("p",[s._v("其实没有公网IP的情况下，内网穿透的方案很多。比如还有FRP、NPS等，但是需要用到代理服务器")]),s._v(" "),t("p",[s._v("也可以选择像零遁NAS伴侣，蒲公英X1盒子，或者花生壳盒子这样专业的内网穿透硬件")]),s._v(" "),t("p",[s._v("所以今天介绍的这款ZeroTier就是给不想花钱，并且喜欢折腾的小伙伴准备的。它支持的平台多，一次搭建后期无脑使用，可谓是一劳永逸，虽说速度并不能完全保证（我这边是时快时慢），但是它完全可以作为无公网IP实现内网穿透的备用方案。")])])}),[],!1,null,null,null);a.default=r.exports}}]);