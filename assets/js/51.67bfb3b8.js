(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{632:function(a,e,s){"use strict";s.r(e);var t=s(17),r=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"docker-备份还原镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-备份还原镜像"}},[a._v("#")]),a._v(" Docker-备份还原镜像")]),a._v(" "),s("h2",{attrs:{id:"一、镜像备份"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、镜像备份"}},[a._v("#")]),a._v(" 一、镜像备份")]),a._v(" "),s("p",[a._v("1、如果是正在运行的容器，则先要把容器打包成镜像")]),a._v(" "),s("p",[a._v("将该暂停的容器打包成镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker commit 容器id 新的镜像名\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("查看镜像列表")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker images\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("2、备份成tar压缩文件导出到D盘docker_backup文件夹")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker save 镜像id > /data/docker/backup/压缩.tar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"二、镜像恢复"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、镜像恢复"}},[a._v("#")]),a._v(" 二、镜像恢复")]),a._v(" "),s("p",[a._v("1、将备份文件夹内的备份文件恢复到docker的镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker load < /data/docker/backup/压缩.tar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"docker加载新的镜像后repository和tag名称都为none的解决方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker加载新的镜像后repository和tag名称都为none的解决方法"}},[a._v("#")]),a._v(" docker加载新的镜像后repository和tag名称都为none的解决方法")]),a._v(" "),s("p",[a._v("可以使用命令:")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker tag [image id] [name]:[版本]\n例如:\n\ndocker tag b03b74b01d97 docker-redis:0.0.1\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);