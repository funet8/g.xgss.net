(window.webpackJsonp=window.webpackJsonp||[]).push([[191],{778:function(v,_,s){"use strict";s.r(_);var t=s(17),a=Object(t.a)({},(function(){var v=this,_=v.$createElement,s=v._self._c||_;return s("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[s("h1",{attrs:{id:"简单明了计算机网络基础知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简单明了计算机网络基础知识"}},[v._v("#")]),v._v(" 简单明了计算机网络基础知识")]),v._v(" "),s("p",[s("strong",[v._v("你是一台电脑，你的名字叫 A")])]),v._v(" "),s("p",[v._v("很久很久之前，你不与任何其他电脑相连接，孤苦伶仃。")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/40e02943f3c142369a28c69a0cd20285?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("直到有一天，你希望与另一台电脑 B 建立通信，于是你们各开了一个网口，用一根"),s("strong",[v._v("网线")]),v._v("连接了起来。")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/12d3ea3666424a9f8650447723eaf7c1.png?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v('用一根网线连接起来怎么就能"通信"了呢？我可以给你讲 IO、讲中断、讲缓冲区，但这不是研究网络时该关心的问题。')]),v._v(" "),s("p",[v._v("如果你纠结，要么去研究一下操作系统是如何处理网络 IO 的，要么去研究一下包是如何被网卡转换成电信号发送出去的，要么就仅仅把它当做电脑里有个小人在"),s("strong",[v._v("开枪")]),v._v("吧~")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/d43e8afc30b0486b9f4ae0db60729752?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("反正，你们就是连起来了，并且可以通信。")]),v._v(" "),s("p",[s("strong",[v._v("第一层")])]),v._v(" "),s("p",[v._v("有一天，一个新伙伴 C 加入了，但聪明的你们很快发现，可以每个人开"),s("strong",[v._v("两个网口")]),v._v("，用一共"),s("strong",[v._v("三根网线")]),v._v("，彼此相连。")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/866adcfbe064494fb81465abbc22ad5f.png?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("随着越来越多的人加入，你发现身上开的网口实在太多了，而且网线密密麻麻，混乱不堪。（而实际上一台电脑根本开不了这么多网口，所以这种连线只在理论上可行，所以连不上的我就用红色虚线表示了，就是这么严谨哈哈~）")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/36d894392a024a489a0feed14fd1e14c.png?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("于是你们发明了一个中间设备，你们将网线都插到这个设备上，由这个设备做转发，就可以彼此之间通信了，本质上和原来一样，只不过网口的数量和网线的数量减少了，不再那么混乱。")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/28de0be491294e1dac3002ac7f1a9379.png?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("你给它取名叫"),s("strong",[v._v("集线器")]),v._v("，它仅仅是无脑将电信号"),s("strong",[v._v("转发到所有出口（广播）")]),v._v("，不做任何处理，你觉得它是没有智商的，因此把人家定性在了"),s("strong",[v._v("物理层")]),v._v("。")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/bd4cc3987d78408198e74f04785486f2?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("由于转发到了所有出口，那 BCDE 四台机器怎么知道数据包是不是发给自己的呢？")]),v._v(" "),s("p",[v._v("首先，你要给所有的连接到集线器的设备，都起个名字。原来你们叫 ABCD，但现在需要一个更专业的，"),s("strong",[v._v("全局唯一")]),v._v("的名字作为标识，你把这个更高端的名字称为 "),s("strong",[v._v("MAC 地址")]),v._v("。")]),v._v(" "),s("p",[v._v("你的 MAC 地址是 aa-aa-aa-aa-aa-aa，你的伙伴 b 的 MAC 地址是 bb-bb-bb-bb-bb-bb，以此类推，不重复就好。")]),v._v(" "),s("p",[v._v("这样，A 在发送数据包给 B 时，只要在头部拼接一个这样结构的数据，就可以了。")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/eb857bd65b48499ea9b1ae4bf3a1183a?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("B 在收到数据包后，根据头部的目标 MAC 地址信息，判断这个数据包的确是发给自己的，于是便"),s("strong",[v._v("收下")]),v._v("。")]),v._v(" "),s("p",[v._v("其他的 CDE 收到数据包后，根据头部的目标 MAC 地址信息，判断这个数据包并不是发给自己的，于是便"),s("strong",[v._v("丢弃")]),v._v("。")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/62c38ba22c664c419567815c1491b205?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("虽然集线器使整个布局干净不少，但原来我只要发给电脑 B 的消息，现在却要发给连接到集线器中的所有电脑，这样既不安全，又不节省网络资源。")]),v._v(" "),s("p",[s("strong",[v._v("第二层")])]),v._v(" "),s("p",[v._v("如果把这个集线器弄得更智能一些，"),s("strong",[v._v("只发给目标 MAC 地址指向的那台电脑")]),v._v("，就好了。")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/9343e1ac854f4e8589c71b46ee165251?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("虽然只比集线器多了这一点点区别，但看起来似乎有智能了，你把这东西叫做"),s("strong",[v._v("交换机")]),v._v("。也正因为这一点点智能，你把它放在了另一个层级，"),s("strong",[v._v("数据链路层")]),v._v("。")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/71785b0fb46f40b7b15c55074020b4ee.png?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("如上图所示，你是这样设计的。")]),v._v(" "),s("p",[v._v("交换机内部维护一张 "),s("strong",[v._v("MAC 地址表")]),v._v("，记录着每一个 MAC 地址的设备，连接在其哪一个端口上。")]),v._v(" "),s("p",[v._v("MAC 地址端口bb-bb-bb-bb-bb-bb1cc-cc-cc-cc-cc-cc3\naa-aa-aa-aa-aa-aa4\ndd-dd-dd-dd-dd-dd5")]),v._v(" "),s("p",[v._v("假如你仍然要发给 B 一个数据包，构造了如下的数据结构从网口出去。")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/5236bd1c36bb492390e978b21b24ad9b?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("到达交换机时，交换机内部通过自己维护的 MAC 地址表，发现"),s("strong",[v._v("目标机器 B 的 MAC 地址 bb-bb-bb-bb-bb-bb 映射到了端口 1 上")]),v._v("，于是把数据从 1 号端口发给了 B，完事~")]),v._v(" "),s("p",[v._v("你给这个通过这样传输方式而组成的小范围的网络，叫做"),s("strong",[v._v("以太网")]),v._v("。")]),v._v(" "),s("p",[v._v("当然最开始的时候，MAC 地址表是空的，是怎么逐步建立起来的呢？")]),v._v(" "),s("p",[v._v("假如在 MAC 地址表为空是，你给 B 发送了如下数据")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/f1e0e29570d14af1b9f121d92d685e9f.png?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("由于这个包从端口 4 进入的交换机，所以此时交换机就可以在 MAC地址表记录第一条数据：")]),v._v(" "),s("p",[s("strong",[v._v("MAC：aa-aa-aa-aa-aa-aa-aa\n端口：4")])]),v._v(" "),s("p",[v._v("交换机看目标 MAC 地址（bb-bb-bb-bb-bb-bb）在地址表中并没有映射关系，于是将此包发给了"),s("strong",[v._v("所有端口")]),v._v("，也即发给了所有机器。")]),v._v(" "),s("p",[v._v("之后，只有机器 B 收到了确实是发给自己的包，于是做出了"),s("strong",[v._v("响应")]),v._v("，响应数据从端口 1 进入交换机，于是交换机此时在地址表中更新了第二条数据：")]),v._v(" "),s("p",[s("strong",[v._v("MAC：bb-bb-bb-bb-bb-bb\n端口：1")])]),v._v(" "),s("p",[v._v("过程如下")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/1b042b3316124369a18e96b3572b3cf2?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("经过该网络中的机器不断地通信，交换机最终将 MAC 地址表建立完毕~")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/a582d62d57cf432a971ad990a2385485?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("随着机器数量越多，交换机的端口也不够了，但聪明的你发现，只要将多个交换机连接起来，这个问题就轻而易举搞定~")]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/92775375d1c7400593d3a0226d82a831?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("你完全不需要设计额外的东西，只需要按照之前的设计和规矩来，按照上述的接线方式即可完成所有电脑的互联，所以交换机设计的这种规则，真的很巧妙。你想想看为什么（比如 A 要发数据给 F）。")]),v._v(" "),s("p",[v._v("但是你要注意，上面那根红色的线，最终在 MAC 地址表中可不是一条记录呀，而是要把 EFGH 这四台机器与该端口（端口6）的映射全部记录在表中。")]),v._v(" "),s("p",[v._v("最终，"),s("strong",[v._v("两个交换机将分别记录 A ~ H 所有机器的映射记录")]),v._v("。")]),v._v(" "),s("p",[s("strong",[v._v("左边的交换机")])]),v._v(" "),s("p",[v._v("MAC 地址端口bb-bb-bb-bb-bb-bb1cc-cc-cc-cc-cc-cc3\naa-aa-aa-aa-aa-aa4\ndd-dd-dd-dd-dd-dd5\nee-ee-ee-ee-ee-ee\n6\nff-ff-ff-ff-ff-ff\n6gg-gg-gg-gg-gg-gg\n6\nhh-hh-hh-hh-hh-hh\n6")]),v._v(" "),s("p",[s("strong",[v._v("右边的交换机")])]),v._v(" "),s("p",[v._v("MAC 地址端口bb-bb-bb-bb-bb-bb1cc-cc-cc-cc-cc-cc1\naa-aa-aa-aa-aa-aa1\ndd-dd-dd-dd-dd-dd1\nee-ee-ee-ee-ee-ee\n2\nff-ff-ff-ff-ff-ff\n3gg-gg-gg-gg-gg-gg\n4\nhh-hh-hh-hh-hh-hh\n6")]),v._v(" "),s("p",[v._v("这在只有 8 台电脑的时候还好，甚至在只有几百台电脑的时候，都还好，所以这种交换机的设计方式，已经足足支撑一阵子了。")]),v._v(" "),s("p",[v._v("但很遗憾，人是贪婪的动物，很快，电脑的数量就发展到几千、几万、几十万。")]),v._v(" "),s("p",[s("strong",[v._v("第三层")])]),v._v(" "),s("p",[v._v("交换机已经无法记录如此庞大的映射关系了。")]),v._v(" "),s("p",[v._v("此时你动了歪脑筋，你发现了问题的根本在于，连出去的那根红色的网线，后面不知道有多少个设备不断地连接进来，从而使得地址表越来越大。")]),v._v(" "),s("p",[v._v("那我可不可以让那根红色的网线，接入一个"),s("strong",[v._v("新的设备")]),v._v("，这个设备就跟电脑一样有自己独立的 MAC 地址，而且同时还能帮我把数据包做一次"),s("strong",[v._v("转发")]),v._v("呢？")]),v._v(" "),s("p",[v._v("这个设备就是"),s("strong",[v._v("路由器，"),s("strong",[v._v("它的功能就是，作为一台独立的拥有 MAC 地址的设备，并且可以帮我把数据包做一次转发")]),v._v("，"),s("strong",[v._v("你把它定在了")]),v._v("网络层。")])]),v._v(" "),s("p",[s("img",{attrs:{src:"https://imgoss.xgss.net/picgo/3e9cca5de0bb406e9297f33877ec2824?aliyun",alt:"大学要是这样讲述计算机网络我当初怎么也不会挂科啊"}})]),v._v(" "),s("p",[v._v("注意，路由器的每一个端口，都有独立的 MAC 地址")]),v._v(" "),s("p",[v._v("好了，现在交换机的 MAC 地址表中，只需要多出一条 MAC 地址 ABAB 与其端口的映射关系，就可以成功把数据包转交给路由器了，这条搞定。")]),v._v(" "),s("p",[v._v("那如何做到，把发送给 C 和 D，甚至是把发送给 DEFGH.... 的数据包，统统先发送给路由器呢？")]),v._v(" "),s("p",[v._v("不难想到这样一个点子，假如电脑 C 和 D 的 MAC 地址拥有共同的前缀，比如分别是")]),v._v(" "),s("p",[s("strong",[v._v("C 的 MAC 地址：FFFF-FFFF-CCCC")])]),v._v(" "),s("p",[s("strong",[v._v("D 的 MAC 地址：FFFF-FFFF-DDDD")])]),v._v(" "),s("p",[v._v("那我们就可以说，将目标 MAC 地址为 "),s("strong",[v._v("FFFF-FFFF-？开头的")]),v._v("，统统先发送给路由器。")]),v._v(" "),s("p",[v._v("这样是否可行呢？答案是否定的。")]),v._v(" "),s("p",[v._v("我们先从现实中 MAC 地址的结构入手，MAC地址也叫物理地址、硬件地址，长度为 48 位，一般这样来表示")]),v._v(" "),s("p",[s("strong",[v._v("00-16-EA-AE-3C-40")])]),v._v(" "),s("p",[v._v("它是由网络设备制造商生产时烧录在网卡的EPROM（一种闪存芯片，通常可以通过程序擦写）。其中**前 24 位（00-16-EA）代表网络硬件制造商的编号，后 24 位（AE-3C-40）是该厂家自己分配的，一般表示系列号。**只要不更改自己的 MAC 地址，MAC 地址在世界是唯一的。形象地说，MAC地址就如同身份证上的身份证号码，具有唯一性。")]),v._v(" "),s("p",[v._v("那如果你希望向上面那样表示将目标 MAC 地址为 "),s("strong",[v._v("FFFF-FFFF-？开头的")]),v._v("，统一从路由器出去发给某一群设备（后面会提到这其实是子网的概念），那你就需要要求某一子网下统统买一个厂商制造的设备，要么你就需要要求厂商在生产网络设备烧录 MAC 地址时，提前按照你规划好的子网结构来定 MAC 地址，并且日后这个网络的结构都不能轻易改变。")]),v._v(" "),s("p",[v._v("这显然是不现实的。")]),v._v(" "),s("p",[v._v("于是你发明了一个新的地址，给每一台机器一个 32 位的编号，如：")]),v._v(" "),s("p",[s("strong",[v._v("11000000101010000000000000000001")])]),v._v(" "),s("p",[v._v("你觉得有些不清晰，于是把它分成四个部分，中间用点相连。")]),v._v(" "),s("p",[s("strong",[v._v("11000000.10101000.00000000.00000001")])]),v._v(" "),s("p",[v._v("你还觉得不清晰，于是把它转换成 10 进制。")]),v._v(" "),s("p",[s("strong",[v._v("192.168.0.1")])]),v._v(" "),s("p",[v._v("最后你给了这个地址一个响亮的名字，"),s("strong",[v._v("IP 地址")]),v._v("。现在每一台电脑，同时有自己的 MAC 地址，又有自己的 IP 地址，只不过 IP 地址是"),s("strong",[v._v("软件层面")]),v._v("上的，可以随时修改，MAC 地址一般是无法修改的。")]),v._v(" "),s("p",[v._v("这样一个可以随时修改的 IP 地址，就可以根据你规划的网络拓扑结构，来调整了。")])])}),[],!1,null,null,null);_.default=a.exports}}]);