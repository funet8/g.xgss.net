(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{687:function(a,s,t){"use strict";t.r(s);var e=t(17),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"基于linux搭建开源配置管理中心apollo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基于linux搭建开源配置管理中心apollo"}},[a._v("#")]),a._v(" 基于Linux搭建开源配置管理中心apollo")]),a._v(" "),t("h2",{attrs:{id:"什么是apollo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是apollo"}},[a._v("#")]),a._v(" 什么是apollo")]),a._v(" "),t("p",[a._v("Apollo（阿波罗）是一款可靠的分布式配置管理中心，诞生于携程框架研发部，能够集中化管理应用不同环境、不同集群的配置，配置修改后能够实时推送到应用端，并且具备规范的权限、流程治理等特性，适用于微服务配置管理场景。")]),a._v(" "),t("h2",{attrs:{id:"应用什么场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#应用什么场景"}},[a._v("#")]),a._v(" 应用什么场景")]),a._v(" "),t("p",[a._v("项目在不同环境对应的配置不同")]),a._v(" "),t("h2",{attrs:{id:"apollo优点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apollo优点"}},[a._v("#")]),a._v(" Apollo优点")]),a._v(" "),t("h3",{attrs:{id:"_1-统一管理不同环境、不同集群的配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-统一管理不同环境、不同集群的配置"}},[a._v("#")]),a._v(" 1.统一管理不同环境、不同集群的配置")]),a._v(" "),t("p",[a._v("Apollo提供了一个统一界面集中式管理不同环境（environment）、不同集群（cluster）、不同命名空间（namespace）的配置。")]),a._v(" "),t("p",[a._v("同一份代码部署在不同的集群，可以有不同的配置，比如zk的地址等")]),a._v(" "),t("p",[a._v("通过命名空间（namespace）可以很方便的支持多个不同应用共享同一份配置，同时还允许应用对共享的配置进行覆盖")]),a._v(" "),t("h3",{attrs:{id:"_2-配置修改实时生效-热发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置修改实时生效-热发布"}},[a._v("#")]),a._v(" 2.配置修改实时生效（热发布）")]),a._v(" "),t("p",[a._v("用户在 Apollo 修改完配置并发布后，客户端能实时（1 秒）接收到最新的配置，并通知到应用程序。")]),a._v(" "),t("h3",{attrs:{id:"_3-版本发布管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-版本发布管理"}},[a._v("#")]),a._v(" 3.版本发布管理")]),a._v(" "),t("p",[a._v("所有的配置发布都有版本概念，从而可以方便地支持配置的回滚。")]),a._v(" "),t("h3",{attrs:{id:"_4-灰度发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-灰度发布"}},[a._v("#")]),a._v(" 4.灰度发布")]),a._v(" "),t("p",[a._v("支持配置的灰度发布，比如点了发布后，只对部分应用实例生效，等观察一段时间没问题后再推给所有应用实例。")]),a._v(" "),t("h3",{attrs:{id:"_5-权限管理、发布审核、操作审计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-权限管理、发布审核、操作审计"}},[a._v("#")]),a._v(" 5.权限管理、发布审核、操作审计")]),a._v(" "),t("p",[a._v("应用和配置的管理都有完善的权限管理机制，对配置的管理还分为了编辑和发布两个环节，从而减少人为的错误。所有的操作都有审计日志，可以方便地追踪问题。")]),a._v(" "),t("h3",{attrs:{id:"_6-客户端配置信息监控"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-客户端配置信息监控"}},[a._v("#")]),a._v(" 6.客户端配置信息监控")]),a._v(" "),t("p",[a._v("可以在界面上方便地看到配置在被哪些实例使用。")]),a._v(" "),t("h3",{attrs:{id:"_7-提供-java-和-net-原生客户端-同时提供http接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-提供-java-和-net-原生客户端-同时提供http接口"}},[a._v("#")]),a._v(" 7.提供 Java 和.Net 原生客户端，同时提供HTTP接口")]),a._v(" "),t("p",[a._v("提供了 Java 和.Net 的原生客户端，方便应用集成，同时提供了 Http 接口，非 Java 和.Net 应用也可以方便地使用。")]),a._v(" "),t("p",[a._v("go、python、nodejs、PHP等开发语言也提供客户端使用的案例，"),t("a",{attrs:{href:"https://www.apolloconfig.com/#/zh/usage/third-party-sdks-user-guide",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考地址"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"_8-提供开放平台-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-提供开放平台-api"}},[a._v("#")]),a._v(" 8. 提供开放平台 API")]),a._v(" "),t("p",[a._v("Apollo 自身提供了比较完善的统一配置管理界面，支持多环境、多数据中心配置管理、权限、流程治理等特性。不过 Apollo 出于通用性考虑，不会对配置的修改做过多限制，只要符合基本的格式就能保存，不会针对不同的配置值进行针对性的校验，如数据库用户名、密码，Redis 服务地址等。对于这类应用配置，Apollo 支持应用方通过开放平台 API 在 Apollo 进行配置的修改和发布，并且具备完善的授权和权限控制。")]),a._v(" "),t("h3",{attrs:{id:"_9-部署简单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-部署简单"}},[a._v("#")]),a._v(" 9.部署简单")]),a._v(" "),t("p",[a._v("配置中心作为基础服务，可用性要求非常高，这就要求 Apollo 对外部依赖尽可能地少，目前唯一的外部依赖是 MySQL，所以部署非常简单，只要安装好 Java 和 MySQL 就可以让 Apollo 跑起来。Apollo 还提供了打包脚本，一键就可以生成所有需要的安装包，并且支持自定义运行时参数。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/%E5%9F%BA%E4%BA%8ELinux%E6%90%AD%E5%BB%BA%E5%BC%80%E6%BA%90%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B8%AD%E5%BF%83apollo.jpg?aliyun",alt:"基于Linux搭建开源配置管理中心apollo"}})]),a._v(" "),t("h2",{attrs:{id:"测试系统介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试系统介绍"}},[a._v("#")]),a._v(" 测试系统介绍")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("系统")]),a._v(" "),t("th",[a._v("Centos7")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("java环境")]),a._v(" "),t("td",[a._v("java1.8")])]),a._v(" "),t("tr",[t("td",[a._v("数据库")]),a._v(" "),t("td",[a._v("MariaDB-10.2.9")])]),a._v(" "),t("tr",[t("td",[a._v("IP")]),a._v(" "),t("td",[a._v("192.168.1.5")])])])]),a._v(" "),t("p",[a._v("Quick Start脚本会在本地启动3个服务，分别使用8070, 8080, 8090端口，请确保这3个端口当前没有被使用。")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('# java -version\nopenjdk version "1.8.0_302"\nOpenJDK Runtime Environment (build 1.8.0_302-b08)\nOpenJDK 64-Bit Server VM (build 25.302-b08, mixed mode)\n# mysql -V\nmysql  Ver 15.1 Distrib 10.2.9-MariaDB, for Linux (x86_64) using readline 5.1\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("h2",{attrs:{id:"安装apollo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装apollo"}},[a._v("#")]),a._v(" 安装apollo")]),a._v(" "),t("h3",{attrs:{id:"下载quick-start安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载quick-start安装包"}},[a._v("#")]),a._v(" 下载Quick Start安装包")]),a._v(" "),t("p",[a._v("安装包共50M，如果访问github网速不给力的话，可以从百度网盘下载。")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("从GitHub下载")]),a._v(" "),t("ul",[t("li",[a._v("checkout或下载"),t("a",{attrs:{href:"https://github.com/nobodyiam/apollo-build-scripts",target:"_blank",rel:"noopener noreferrer"}},[a._v("apollo-build-scripts项目"),t("OutboundLink")],1)]),a._v(" "),t("li",[a._v("由于Quick Start项目比较大，所以放在了另外的repository，请注意项目地址\n"),t("ul",[t("li",[a._v("https://github.com/nobodyiam/apollo-build-scripts")])])])])]),a._v(" "),t("li",[t("p",[a._v("从百度网盘下载")]),a._v(" "),t("ul",[t("li",[a._v("通过"),t("a",{attrs:{href:"https://pan.baidu.com/s/1Ieelw6y3adECgktO0ea0Gg",target:"_blank",rel:"noopener noreferrer"}},[a._v("网盘链接"),t("OutboundLink")],1),a._v("下载，提取码: 9wwe")]),a._v(" "),t("li",[a._v("下载到本地后，在本地解压apollo-quick-start.zip")])])]),a._v(" "),t("li",[t("p",[a._v("为啥安装包要58M这么大？")]),a._v(" "),t("ul",[t("li",[a._v("因为这是一个可以自启动的jar包，里面包含了所有依赖jar包以及一个内置的tomcat容器")])])])]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd /data/wwwroot/web/\ngit clone https://github.com/apolloconfig/apollo-build-scripts.git\n由于网络原因下载比较慢\n\nwget http://js.funet8.com/centos_software/apollo-build-scripts-master.zip\nunzip apollo-build-scripts-master.zip\nmv apollo-build-scripts-master apollo.chuanqu.ltd\ncd apollo.chuanqu.ltd\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("h3",{attrs:{id:"创建数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库"}},[a._v("#")]),a._v(" 创建数据库")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# mysql -u root -h192.168.1.5 -P 3306 -p123456\n# 导入数据 ApolloPortalDB\n> source /data/wwwroot/web/apollo.chuanqu.ltd/sql/apolloportaldb.sql\n# 验证\n> select `Id`, `AppId`, `Name` from ApolloPortalDB.App;\n\n# 导入 ApolloConfigDB\n> source /data/wwwroot/web/apollo.chuanqu.ltd/sql/apolloconfigdb.sql\n\n> select `NamespaceId`, `Key`, `Value`, `Comment` from ApolloConfigDB.Item;\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br")])]),t("h3",{attrs:{id:"配置数据库连接信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置数据库连接信息"}},[a._v("#")]),a._v(" 配置数据库连接信息")]),a._v(" "),t("p",[a._v("Apollo服务端需要知道如何连接到你前面创建的数据库，所以需要编辑demo.sh，修改ApolloPortalDB和ApolloConfigDB相关的数据库连接串信息。")]),a._v(" "),t("p",[a._v("注意：填入的用户需要具备对ApolloPortalDB和ApolloConfigDB数据的读写权限。")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('# vi demo.sh\n\n#apollo config db info\napollo_config_db_url="jdbc:mysql://192.168.1.5:3306/ApolloConfigDB?characterEncoding=utf8&serverTimezone=Asia/Shanghai"\napollo_config_db_username=root\napollo_config_db_password=123456\n\n# apollo portal db info\napollo_portal_db_url="jdbc:mysql://192.168.1.5:3306/ApolloPortalDB?characterEncoding=utf8&serverTimezone=Asia/Shanghai"\napollo_portal_db_username=root\napollo_portal_db_password=123456\n\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("h3",{attrs:{id:"执行启动脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行启动脚本"}},[a._v("#")]),a._v(" 执行启动脚本")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("./demo.sh start\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("显示")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# ./demo.sh start\n==== starting service ====\nService logging file is ./service/apollo-service.log\nApplication is running as root (UID 0). This is considered insecure.\nStarted [32028]\nWaiting for config service startup.....\nConfig service started. You may visit http://localhost:8080 for service status now!\nWaiting for admin service startup.\nAdmin service started\n==== starting portal ====\nPortal logging file is ./portal/apollo-portal.log\nApplication is running as root (UID 0). This is considered insecure.\nStarted [32251]\nWaiting for portal startup....\nPortal started. You can visit http://localhost:8070 now!\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br")])]),t("p",[a._v("访问8080端口")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220329181451424.png?aliyun",alt:"image-20220329181451424"}})]),a._v(" "),t("p",[a._v("访问 http://IP+8070")]),a._v(" "),t("p",[a._v("输入用户名apollo，密码admin后登录")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220329181552814.png?aliyun",alt:"image-20220329181552814"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220329181603822.png?aliyun",alt:"image-20220329181603822"}})]),a._v(" "),t("h3",{attrs:{id:"运行客户端程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行客户端程序"}},[a._v("#")]),a._v(" 运行客户端程序")]),a._v(" "),t("p",[a._v("运行"),t("code",[a._v("./demo.sh client")]),a._v("启动Demo客户端，忽略前面的调试信息，可以看到如下提示：")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("Apollo Config Demo. Please input key to get the value. Input quit to exit.\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("输入"),t("code",[a._v("timeout")]),a._v("，会看到如下信息：")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("timeout")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("SimpleApolloConfigDemo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Loading key "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("timeout")]),a._v(" with value: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("\n修改配置之后\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" Changes "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" namespace application\nChange - key: timeout, oldValue: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(", newValue: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("250")]),a._v(", changeType: MODIFIED\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("timeout")]),a._v("\nLoading key "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("timeout")]),a._v(" with value: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("250")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h1",{attrs:{id:"配置nginx反向代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx反向代理"}},[a._v("#")]),a._v(" 配置nginx反向代理")]),a._v(" "),t("p",[a._v("域名:")]),a._v(" "),t("p",[a._v("apollo.chuanqu.ltd (接口)")]),a._v(" "),t("p",[a._v("apollo-houtai.chuanqu.ltd (后台)")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("server {\n        listen       80;\n        server_name  apollo-houtai.chuanqu.ltd;\n        #root /data/wwwroot/web/;\n        access_log /data/wwwroot/log/apollo.chuanqu.ltd-access.log main_aliyun;\n        error_log off;\n\n        location / {\n                index index.php index.html;\n                proxy_pass      http://192.168.1.5:8070;\n                proxy_redirect off;\n                proxy_set_header Host $host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n        }\n}\n\nserver {\n        listen       80;\n        server_name  apollo.chuanqu.ltd;\n        #root /data/wwwroot/web/;\n        access_log /data/wwwroot/log/apollo.chuanqu.ltd-access.log main_aliyun;\n        error_log off;\n\n        location / {\n                index index.php index.html;\n                proxy_pass      http://192.168.1.5:8080;\n                proxy_redirect off;\n                proxy_set_header Host $host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n        }\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br"),t("span",{staticClass:"line-number"},[a._v("28")]),t("br"),t("span",{staticClass:"line-number"},[a._v("29")]),t("br"),t("span",{staticClass:"line-number"},[a._v("30")]),t("br"),t("span",{staticClass:"line-number"},[a._v("31")]),t("br"),t("span",{staticClass:"line-number"},[a._v("32")]),t("br"),t("span",{staticClass:"line-number"},[a._v("33")]),t("br"),t("span",{staticClass:"line-number"},[a._v("34")]),t("br"),t("span",{staticClass:"line-number"},[a._v("35")]),t("br")])]),t("h1",{attrs:{id:"使用新的项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用新的项目"}},[a._v("#")]),a._v(" 使用新的项目")]),a._v(" "),t("h2",{attrs:{id:"应用接入apollo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#应用接入apollo"}},[a._v("#")]),a._v(" 应用接入Apollo")]),a._v(" "),t("p",[a._v("这部分可以参考Java应用接入指南 "),t("a",{attrs:{href:"https://www.apolloconfig.com/#/zh/usage/java-sdk-user-guide",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://www.apolloconfig.com/#/zh/usage/java-sdk-user-guide"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"运行客户端程序-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行客户端程序-2"}},[a._v("#")]),a._v(" 运行客户端程序")]),a._v(" "),t("p",[a._v("由于使用了新的项目，所以客户端需要修改appId信息。")]),a._v(" "),t("p",[a._v("编辑"),t("code",[a._v("client/META-INF/app.properties")]),a._v("，修改app.id为你新创建的app id。")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("app.id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("你的appId")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("运行"),t("code",[a._v("./demo.sh client")]),a._v("启动Demo客户端即可。")]),a._v(" "),t("h3",{attrs:{id:"创建应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建应用"}},[a._v("#")]),a._v(" 创建应用")]),a._v(" "),t("p",[a._v("设置appid为 1001，")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220330095536959.png?aliyun",alt:"image-20220330095536959"}})]),a._v(" "),t("p",[a._v("新增配置")]),a._v(" "),t("p",[a._v("设置，redis_ip和 value为192.168.1.12")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220330095647881.png?aliyun",alt:"image-20220330095647881"}})]),a._v(" "),t("p",[a._v("点击发布")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220330095756015.png?aliyun",alt:"image-20220330095756015"}})]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim client/META-INF/app.properties\n把app.id改成刚才新增的应用的ID\napp.id=1001\n\n运行客户端，输入对应key值，看是否能获取到value值。\n./demo.sh client\nApollo Config Demo. Please input key to get the value. Input quit to exit.\n> redis_ip\nLoading key : redis_ip with value: 192.168.1.12\n> redis_passwd\nLoading key : redis_passwd with value: 123456\n\n新增一个redis_port的KEY\n> Changes for namespace application\nChange - key: redis_port, oldValue: null, newValue: 6379, changeType: ADDED\n> redis_port\nLoading key : redis_port with value: 6379\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br")])]),t("p",[a._v("基于Centos7搭建开源配置管理中心apollo，完成。")]),a._v(" "),t("h1",{attrs:{id:"参考地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考地址"}},[a._v("#")]),a._v(" 参考地址")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.apolloconfig.com/#/zh/",target:"_blank",rel:"noopener noreferrer"}},[a._v("官网文档"),t("OutboundLink")],1)]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/apolloconfig/apollo/wiki/%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97#11-%E8%BF%90%E8%A1%8C%E6%97%B6%E7%8E%AF%E5%A2%83",target:"_blank",rel:"noopener noreferrer"}},[a._v("分布式部署指南"),t("OutboundLink")],1)]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/ctripcorp/apollo",target:"_blank",rel:"noopener noreferrer"}},[a._v("GitHub仓库"),t("OutboundLink")],1)]),a._v(" "),t("p",[t("a",{attrs:{href:"https://gitee.com/apolloconfig",target:"_blank",rel:"noopener noreferrer"}},[a._v("Gitee仓库"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("知乎："),t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/28723169",target:"_blank",rel:"noopener noreferrer"}},[a._v("携程开源配置中心Apollo的设计与实现"),t("OutboundLink")],1)]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/ljx211520/apollo-php-client",target:"_blank",rel:"noopener noreferrer"}},[a._v("携程Apollo的PHP客户端"),t("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);