(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{735:function(s,a,n){"use strict";n.r(a);var e=n(17),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_3-基于centos7的jenkins安卓自动打包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-基于centos7的jenkins安卓自动打包"}},[s._v("#")]),s._v(" 3.基于centos7的jenkins安卓自动打包")]),s._v(" "),n("p",[s._v("安装完成需要准备以下")]),s._v(" "),n("p",[s._v("在CentOS 7下构建安卓Android编译环境")]),s._v(" "),n("p",[s._v("安装jenkins")]),s._v(" "),n("p",[s._v("最后一步来自动or手动打包")]),s._v(" "),n("p",[s._v("需要在资料")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1.jenkins项目名：安卓自动打包-小游戏-GameDev-Android-SDK\n2.钉钉群助手\n钉钉群-群设置-智能群助手，添加机器人：https://help.aliyun.com/document_detail/153691.html\n获取：\nhttps://oapi.dingtalk.com/robot/send?access_token=XXXXXXXX\n\n3.Git仓库：  git@192.168.1.9:wxgame/GameDev-Android-SDK.git\n\n目录： /data/android/\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("手动操作：")]),s._v(" "),n("h2",{attrs:{id:"_1-拉取git仓库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-拉取git仓库"}},[s._v("#")]),s._v(" 1.拉取git仓库")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# cd /data/android/\n# git clone git@192.168.1.9:wxgame/GameDev-Android-SDK.git\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"_2-打包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-打包"}},[s._v("#")]),s._v(" 2.打包")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# cd GameDev-Android-SDK/Android   #研发的安卓项目放在Android目录中\n# ls\nbuild.gradle  gradle  gradle.properties  gradlew  gradlew.bat  launcher  local.properties  settings.gradle  unityLibrary\n# chmod +x gradlew\n打包命令：\n./gradlew :launcher:assembleRelease\n如果没有报错\n完成后，编译好的 apk 文件位于 launcher/build/outputs/apk/release  路径下。\n如果有报错，则调试错误。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"_3-写shell脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-写shell脚本"}},[s._v("#")]),s._v(" 3.写shell脚本")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /data/android/GameDev-Android-SDK.sh\nchmod +x /data/android/GameDev-Android-SDK.sh\n\n#!/bin/bash\n############################################################\n#名字：\tGameDev-Android-SDK.sh\n# vim /data/android/GameDev-Android-SDK.sh\n# chmod +x /data/android/GameDev-Android-SDK.sh\n#功能：\t安卓自动打包\n#作者：\tstar\n#邮件：\tstar@funet8.com\n#时间：      2021/08/18\n#Version 1.0\n###########################################################\n# 克隆项目\n# cd /data/android/\n# git clone git@192.168.1.9:wxgame/GameDev-Android-SDK.git\n\nNowTime=`date +%Y%m%d-%H:%M:%S`\nGit_Name='GameDev-Android-SDK'\nGit_Path='/data/android/GameDev-Android-SDK'\nWebSite_Path='/data/wwwroot/web/android.7477.ltd'\n\n#进入项目拉取最新代码并且打包\ncd $Git_Path\ngit checkout master\ngit pull\n\ncd $Git_Path/Android\nchmod +x gradlew\n./gradlew clean\n./gradlew :launcher:assembleRelease\n\n#拷贝apk包到站点下\ncp $Git_Path/Android/launcher/build/outputs/apk/release/launcher-release.apk $WebSite_Path/$Git_Name-$NowTime.apk\n\n#删除15天前的文件\nfind $WebSite_Path -type f -mtime +15 -exec rm -f {} \\;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("h1",{attrs:{id:"jenkins后台配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jenkins后台配置"}},[s._v("#")]),s._v(" jenkins后台配置")]),s._v(" "),n("h2",{attrs:{id:"_1-新建任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-新建任务"}},[s._v("#")]),s._v(" 1.新建任务")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818175813206.png?aliyunoss",alt:"image-20210818175813206"}})]),s._v(" "),n("h2",{attrs:{id:"_2-输入名称"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-输入名称"}},[s._v("#")]),s._v(" 2.输入名称")]),s._v(" "),n("p",[s._v("构建一个自由风格的软件项目")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818175929242.png?aliyunoss",alt:"image-20210818175929242"}})]),s._v(" "),n("p",[n("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818180659057.png?aliyunoss",alt:"image-20210818180659057"}})]),s._v(" "),n("p",[n("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818180724086.png?aliyunoss",alt:"image-20210818180724086"}})]),s._v(" "),n("h2",{attrs:{id:"执行成功后钉钉通知"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#执行成功后钉钉通知"}},[s._v("#")]),s._v(" 执行成功后钉钉通知")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://imgoss.xgss.net/picgo/image-20210818180803508.png?aliyunoss",alt:"image-20210818180803508"}})])])}),[],!1,null,null,null);a.default=t.exports}}]);