(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{645:function(s,a,e){"use strict";e.r(a);var n=e(17),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"centos7下lvm给腾讯云云硬盘扩容操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos7下lvm给腾讯云云硬盘扩容操作"}},[s._v("#")]),s._v(" CentOS7下LVM给腾讯云云硬盘扩容操作")]),s._v(" "),e("p",[s._v("腾讯云安装ELK后，100G的硬盘不够用了，再购买了500G的硬盘想组成600G，客服居然说不可以，难道腾讯云做了限制了？试试用lvm来给100G的硬盘扩容到600G")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20211202093956343.png?aliyun",alt:""}})]),s._v(" "),e("p",[s._v("实测扩容是可以的")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20211202160901943.png?aliyun",alt:"image-20211202160901943"}})]),s._v(" "),e("h2",{attrs:{id:"查看硬盘是否购买"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看硬盘是否购买"}},[s._v("#")]),s._v(" 查看硬盘是否购买")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# fdisk -l\n\nDisk /dev/vda: 53.7 GB, 53687091200 bytes, 104857600 sectors\n..\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048   104857566    52427759+  83  Linux\n\nDisk /dev/vdb: 107.4 GB, 107374182400 bytes, 209715200 sectors\n...\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vdb1            2048   209715199   104856576   83  Linux\n\nDisk /dev/vdc: 536.9 GB, 536870912000 bytes, 1048576000 sectors\n...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h2",{attrs:{id:"创建物理卷"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建物理卷"}},[s._v("#")]),s._v(" 创建物理卷")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# pvcreate /dev/vdb /dev/vdc\n\n  Device /dev/vdb excluded by a filter.\n  Physical volume "/dev/vdc" successfully created.\n  报错，由于 /dev/vdb 以前用过。 使用 parted 修复\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("导致问题的原因是添加的磁盘是在另一个虚拟机中新建的，已经有了分区表，现在的虚拟机并不能识别磁盘的分区表，运行parted命令重做分区表，中途需要输入三次命令。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# parted /dev/vdb\n\nGNU Parted 3.1\nUsing /dev/vdb\nWelcome to GNU Parted! Type 'help' to view a list of commands.\n(parted)                                                                  \n(parted) mklabel msdos\nWarning: The existing disk label on /dev/vdb will be destroyed and all data on this disk will be lost. Do\nyou want to continue?\nYes/No? yes                                                               \n(parted) quit                                                             \nInformation: You may need to update /etc/fstab.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("再次运行pvcreate，问是否擦除dos签名，输入y，就可以将磁盘创建为PV了。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# pvcreate /dev/vdb /dev/vdc                     \nWARNING: dos signature detected on /dev/vdb at offset 510. Wipe it? [y/n]: y\n  Wiping dos signature on /dev/vdb.\n  Physical volume "/dev/vdb" successfully created.\n  Physical volume "/dev/vdc" successfully created.\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"创建卷组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建卷组"}},[s._v("#")]),s._v(" 创建卷组")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# vgcreate vg /dev/vdb /dev/vdc\n\n  Volume group "vg" successfully created\n\n# vgs\n\n  VG #PV #LV #SN Attr   VSize   VFree  \n  vg   2   0   0 wz--n- 599.99g 599.99g\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h1",{attrs:{id:"创建逻辑卷"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建逻辑卷"}},[s._v("#")]),s._v(" 创建逻辑卷")]),s._v(" "),e("p",[s._v("基于vg创建逻辑卷lv,名字为app")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# lvcreate -n app -L 599.99G vg\n  Rounding up size to full physical extent 599.99 GiB\n  Logical volume "app" created.\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"格式化和挂载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#格式化和挂载"}},[s._v("#")]),s._v(" 格式化和挂载")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('用ext4的格式格式化/dev/vg/app\nmkfs -t ext4 /dev/vg/app\n\nmount /dev/vg/app /home\n\necho "/dev/vg/app /data ext4 defaults 0 0" >>/etc/fstab\nmount -a\n\ndf -h |grep vg\n/dev/mapper/vg-app  591G  6.1G  555G   2% /home/data\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);