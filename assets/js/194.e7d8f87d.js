(window.webpackJsonp=window.webpackJsonp||[]).push([[194],{789:function(s,a,n){"use strict";n.r(a);var t=n(17),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"centos7编译安装mysql5-7"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos7编译安装mysql5-7"}},[s._v("#")]),s._v(" Centos7编译安装Mysql5.7")]),s._v(" "),n("h2",{attrs:{id:"系统说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#系统说明"}},[s._v("#")]),s._v(" 系统说明")]),s._v(" "),n("p",[s._v("系统： centos7")]),s._v(" "),n("p",[s._v("IP： 192.168.1.4")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("MySQL访问端口: 61920  #默认 3306\n软件包存放目录： /data/software\nmysql安装的目录：/data/mysql5.7/app\nmysql数据存放目录： /data/mysql5.7/data\nmysql数据库配置： /data/mysql5.7/etc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20221130170141687.png?aliyun",alt:"image-20221130170141687"}})]),s._v(" "),n("h2",{attrs:{id:"_1-安装依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装依赖"}},[s._v("#")]),s._v(" 1.安装依赖")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# yum install -y gcc gcc-c++ openssl openssl-devel ncurses-devel\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"_2-下载文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-下载文件"}},[s._v("#")]),s._v(" 2.下载文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\t# mkdir -p /data/software\n\t# cd /data/software\n\t# wget http://js.funet8.com/centos_software/mysql-boost-5.7.34.tar.gz\n\t# wget http://js.funet8.com/centos_software/cmake-3.21.1.tar.gz\t\n\t\n\t# 备用下载：\n\t# wget https://downloads.mysql.com/archives/get/p/23/file/mysql-boost-5.7.34.tar.gz\n\t# wget https://github.com/Kitware/CMake/releases/download/v3.21.1/cmake-3.21.1.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"_3-安装cmake"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装cmake"}},[s._v("#")]),s._v(" 3.安装CMake")]),s._v(" "),n("p",[s._v("编译Mysql5.7需要用到CMake，没有CMake的先下载安装，官网 https://cmake.org/download/")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# cd /data/software\n安装CMake\n# tar -zxvf cmake-3.21.1.tar.gz\n# cd cmake-3.21.1\n# ./configure\n# make && make install\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_4-安装mysql5-7"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装mysql5-7"}},[s._v("#")]),s._v(" 4.安装Mysql5.7")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# tar -zxvf mysql-boost-5.7.34.tar.gz\n# cd mysql-5.7.34/\n# mkdir -p /data/mysql5.7/data /data/mysql5.7/app /data/mysql5.7/etc\n# mkdir /var/run/mysqld\n\n新建mysql用户和mysql用户组：\n# groupadd mysql\n# useradd -M -g mysql -s /sbin/nologin/ mysql\n# chown -R mysql:mysql /data/mysql5.7\n\n# yum install -y \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[n("strong",[s._v("开始Cmake编译Mysql")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# cmake . -DWITH_BOOST=/data/software/mysql-5.7.34/boost/boost_1_59_0 \\\n-DCMAKE_INSTALL_PREFIX=/data/mysql5.7/app \\\n-DMYSQL_DATADIR=/data/mysql5.7/data \\\n-DDEFAULT_CHARSET=utf8mb4 \\\n-DDEFAULT_COLLATION=utf8mb4_general_ci \\\n-DEXTRA_CHARSETS=all \\\n-DENABLED_LOCAL_INFILE=1 \\\n-DMYSQL_USER=mysql \\\n-DMYSQL_TCP_PORT=61920\n# make && make install\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"_5-mysql配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-mysql配置文件"}},[s._v("#")]),s._v(" 5.MySQL配置文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\t# echo \"[client]\n\tdefault-character-set = utf8mb4\n\t[mysqld]\n\t### 基本属性配置\n\tport = 61920\n\tdatadir=/data/mysql5.7/data\n\t# 禁用主机名解析\n\tskip-name-resolve\n\t# 默认的数据库引擎\n\tdefault-storage-engine = InnoDB\n\t### 字符集配置\n\tcharacter-set-client-handshake = FALSE\n\tcharacter-set-server = utf8mb4\n\tcollation-server = utf8mb4_unicode_ci\n\tinit_connect='SET NAMES utf8mb4'\n\t### GTID\n\t# server_id来唯一的标识某个数据库实例，并在链式或双主复制结构中用它来避免sql语句的无限循环\n\tserver_id = 1\n\t# 为保证 GTID 复制的稳定, 行级日志\n\tbinlog_format = row\n\t# 开启 gtid 功能\n\tgtid_mode = on\n\t# 保障 GTID 事务安全\n\t# 当启用enforce_gtid_consistency功能的时候,\n\t# MySQL只允许能够保障事务安全, 并且能够被日志记录的SQL语句被执行,\n\t# 像create table ... select 和 create temporarytable语句,\n\t# 以及同时更新事务表和非事务表的SQL语句或事务都不允许执行\n\tenforce-gtid-consistency = true\n\t# 以下两条配置为主从切换, 数据库高可用的必须配置\n\t# 开启 binlog 日志功能\n\tlog_bin = on\n\t# 开启从库更新 binlog 日志\n\tlog-slave-updates = on\n\t### 慢查询日志\n\t# 打开慢查询日志功能\n\tslow_query_log = 1\n\t# 超过2秒的查询记录下来\n\tlong_query_time = 2\n\t# 记录下没有使用索引的查询\n\tlog_queries_not_using_indexes = 1\n\tslow_query_log_file = ${Mysql_path}/slow-${MYSQL_PORY}.log\n\t### 自动修复\n\t# 记录 relay.info 到数据表中\n\trelay_log_info_repository = TABLE\n\t# 记录 master.info 到数据表中\n\tmaster_info_repository = TABLE\n\t# 启用 relaylog 的自动修复功能\n\trelay_log_recovery = on\n\t# 在 SQL 线程执行完一个 relaylog 后自动删除\n\trelay_log_purge = 1\n\t### 数据安全性配置\n\t# 关闭 master 创建 function 的功能\n\tlog_bin_trust_function_creators = off\n\t# 每执行一个事务都强制写入磁盘\n\tsync_binlog = 1\n\t# timestamp 列如果没有显式定义为 not null, 则支持null属性\n\t# 设置 timestamp 的列值为 null, 不会被设置为 current timestamp\n\texplicit_defaults_for_timestamp=true\n\t### 优化配置\n\t# 优化中文全文模糊索引\n\tft_min_word_len = 1\n\t# 默认库名表名保存为小写, 不区分大小写\n\tlower_case_table_names = 1\n\t# 单条记录写入最大的大小限制\n\t# 过小可能会导致写入(导入)数据失败\n\tmax_allowed_packet = 256M\n\t# 半同步复制开启\n\t#rpl_semi_sync_master_enabled = 1\n\t#rpl_semi_sync_slave_enabled = 1\n\t# 半同步复制超时时间设置\n\t#rpl_semi_sync_master_timeout = 1000\n\t# 复制模式(保持系统默认)\n\t#rpl_semi_sync_master_wait_point = AFTER_SYNC\n\t# 后端只要有一台收到日志并写入 relaylog 就算成功\n\t#rpl_semi_sync_master_wait_slave_count = 1\n\t# 多线程复制\n\t#slave_parallel_type = logical_clock\n\t#slave_parallel_workers = 4\n\t### 连接数限制\n\tmax_connections = 1500\n\t# 验证密码超过20次拒绝连接\n\tmax_connect_errors = 20\n\t# back_log值指出在mysql暂时停止回答新请求之前的短时间内多少个请求可以被存在堆栈中\n\t# 也就是说，如果MySql的连接数达到max_connections时，新来的请求将会被存在堆栈中\n\t# 以等待某一连接释放资源，该堆栈的数量即back_log，如果等待连接的数量超过back_log\n\t# 将不被授予连接资源\n\tback_log = 500\n\topen_files_limit = 65535\n\t# 服务器关闭交互式连接前等待活动的秒数\n\tinteractive_timeout = 3600\n\t# 服务器关闭非交互连接之前等待活动的秒数\n\twait_timeout = 3600\n\t### 内存分配\n\t# 指定表高速缓存的大小。每当MySQL访问一个表时，如果在表缓冲区中还有空间\n\t# 该表就被打开并放入其中，这样可以更快地访问表内容\n\ttable_open_cache = 1024\n\t# 为每个session 分配的内存, 在事务过程中用来存储二进制日志的缓存\n\tbinlog_cache_size = 2M\n\t# 在内存的临时表最大大小\n\ttmp_table_size = 128M\n\t# 创建内存表的最大大小(保持系统默认, 不允许创建过大的内存表)\n\t# 如果有需求当做缓存来用, 可以适当调大此值\n\tmax_heap_table_size = 16M\n\t# 顺序读, 读入缓冲区大小设置\n\t# 全表扫描次数多的话, 可以调大此值\n\tread_buffer_size = 1M\n\t# 随机读, 读入缓冲区大小设置\n\tread_rnd_buffer_size = 8M\n\t# 高并发的情况下, 需要减小此值到64K-128K\n\tsort_buffer_size = 1M\n\t# 每个查询最大的缓存大小是1M, 最大缓存64M 数据\n\tquery_cache_size = 64M\n\tquery_cache_limit = 1M\n\t# 提到 join 的效率\n\tjoin_buffer_size = 16M\n\t# 线程连接重复利用\n\tthread_cache_size = 64\n\t### InnoDB 优化\n\t## 内存利用方面的设置\n\t# 数据缓冲区\n\tinnodb_buffer_pool_size=2G\n\t## 日志方面设置\n\t# 事务日志大小\n\tinnodb_log_file_size = 256M\n\t# 日志缓冲区大小\n\tinnodb_log_buffer_size = 4M\n\t# 事务在内存中的缓冲\n\tinnodb_log_buffer_size = 3M\n\t# 主库保持系统默认, 事务立即写入磁盘, 不会丢失任何一个事务\n\tinnodb_flush_log_at_trx_commit = 1\n\t# mysql 的数据文件设置, 初始100, 以10M 自动扩展\n\tinnodb_data_file_path = ibdata1:10M:autoextend\n\t# 为提高性能, MySQL可以以循环方式将日志文件写到多个文件\n\tinnodb_log_files_in_group = 3\n\t##其他设置\n\t# 如果库里的表特别多的情况，请增加此值\n\tinnodb_open_files = 800\n\t# 为每个 InnoDB 表分配单独的表空间\n\tinnodb_file_per_table = 1\n\t# InnoDB 使用后台线程处理数据页上写 I/O(输入)请求的数量\n\tinnodb_write_io_threads = 8\n\t# InnoDB 使用后台线程处理数据页上读 I/O(输出)请求的数量\n\tinnodb_read_io_threads = 8\n\t# 启用单独的线程来回收无用的数据\n\tinnodb_purge_threads = 1\n\t# 脏数据刷入磁盘(先保持系统默认, swap 过多使用时, 调小此值, 调小后, 与磁盘交互增多, 性能降低)\n\t# innodb_max_dirty_pages_pct = 90\n\t# 事务等待获取资源等待的最长时间\n\tinnodb_lock_wait_timeout = 120\n\t# 开启 InnoDB 严格检查模式, 不警告, 直接报错\n\tinnodb_strict_mode=1\n\t# 允许列索引最大达到3072\n\tinnodb_large_prefix = on\n\t[mysqldump]\n\t# 开启快速导出\n\tquick\n\tdefault-character-set = utf8mb4\n\tmax_allowed_packet = 256M\n\t[mysql]\n\t# 开启 tab 补全\n\tauto-rehash\n\tdefault-character-set = utf8mb4\"> /data/mysql5.7/etc/61920.cnf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br"),n("span",{staticClass:"line-number"},[s._v("115")]),n("br"),n("span",{staticClass:"line-number"},[s._v("116")]),n("br"),n("span",{staticClass:"line-number"},[s._v("117")]),n("br"),n("span",{staticClass:"line-number"},[s._v("118")]),n("br"),n("span",{staticClass:"line-number"},[s._v("119")]),n("br"),n("span",{staticClass:"line-number"},[s._v("120")]),n("br"),n("span",{staticClass:"line-number"},[s._v("121")]),n("br"),n("span",{staticClass:"line-number"},[s._v("122")]),n("br"),n("span",{staticClass:"line-number"},[s._v("123")]),n("br"),n("span",{staticClass:"line-number"},[s._v("124")]),n("br"),n("span",{staticClass:"line-number"},[s._v("125")]),n("br"),n("span",{staticClass:"line-number"},[s._v("126")]),n("br"),n("span",{staticClass:"line-number"},[s._v("127")]),n("br"),n("span",{staticClass:"line-number"},[s._v("128")]),n("br"),n("span",{staticClass:"line-number"},[s._v("129")]),n("br"),n("span",{staticClass:"line-number"},[s._v("130")]),n("br"),n("span",{staticClass:"line-number"},[s._v("131")]),n("br"),n("span",{staticClass:"line-number"},[s._v("132")]),n("br"),n("span",{staticClass:"line-number"},[s._v("133")]),n("br"),n("span",{staticClass:"line-number"},[s._v("134")]),n("br"),n("span",{staticClass:"line-number"},[s._v("135")]),n("br"),n("span",{staticClass:"line-number"},[s._v("136")]),n("br"),n("span",{staticClass:"line-number"},[s._v("137")]),n("br"),n("span",{staticClass:"line-number"},[s._v("138")]),n("br"),n("span",{staticClass:"line-number"},[s._v("139")]),n("br"),n("span",{staticClass:"line-number"},[s._v("140")]),n("br"),n("span",{staticClass:"line-number"},[s._v("141")]),n("br"),n("span",{staticClass:"line-number"},[s._v("142")]),n("br"),n("span",{staticClass:"line-number"},[s._v("143")]),n("br"),n("span",{staticClass:"line-number"},[s._v("144")]),n("br"),n("span",{staticClass:"line-number"},[s._v("145")]),n("br"),n("span",{staticClass:"line-number"},[s._v("146")]),n("br"),n("span",{staticClass:"line-number"},[s._v("147")]),n("br"),n("span",{staticClass:"line-number"},[s._v("148")]),n("br"),n("span",{staticClass:"line-number"},[s._v("149")]),n("br"),n("span",{staticClass:"line-number"},[s._v("150")]),n("br"),n("span",{staticClass:"line-number"},[s._v("151")]),n("br"),n("span",{staticClass:"line-number"},[s._v("152")]),n("br"),n("span",{staticClass:"line-number"},[s._v("153")]),n("br"),n("span",{staticClass:"line-number"},[s._v("154")]),n("br"),n("span",{staticClass:"line-number"},[s._v("155")]),n("br"),n("span",{staticClass:"line-number"},[s._v("156")]),n("br"),n("span",{staticClass:"line-number"},[s._v("157")]),n("br"),n("span",{staticClass:"line-number"},[s._v("158")]),n("br"),n("span",{staticClass:"line-number"},[s._v("159")]),n("br"),n("span",{staticClass:"line-number"},[s._v("160")]),n("br"),n("span",{staticClass:"line-number"},[s._v("161")]),n("br"),n("span",{staticClass:"line-number"},[s._v("162")]),n("br")])]),n("h2",{attrs:{id:"初始化数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化数据库"}},[s._v("#")]),s._v(" 初始化数据库")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# rm -rf  /data/mysql5.7/data/* (如果有文件请删掉否则会报错)\n初始化数据\n# /data/mysql5.7/app/bin/mysqld --defaults-file=/data/mysql5.7/etc/61920.cnf --initialize --user=mysql\n\n启动数据库：\n# /data/mysql5.7/app/bin/mysqld_safe --defaults-file=/data/mysql5.7/etc/61920.cnf &\n\n查看mysql是否启动成功\n# netstat -tunpl |grep mysql\n\n初始化完成的时候会提示生成了一个临时的Mysql root密码，记住\nA temporary password is generated for root@localhost: sTi:!,BhL7=s\n\n#修改密码：\n# /data/mysql5.7/app/bin/mysqladmin -u root -hlocalhost -P61920 -p'sTi:!,BhL7=s' password 123456\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h2",{attrs:{id:"_7-开机自启动mysql服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-开机自启动mysql服务"}},[s._v("#")]),s._v(" 7.开机自启动mysql服务")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('echo "#开机启动mysql5.7" >> /etc/rc.local\necho "/data/mysql5.7/app/bin/mysqld_safe --defaults-file=/data/mysql5.7/etc/61920.cnf &" >> /etc/rc.local\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"_8-添加环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-添加环境变量"}},[s._v("#")]),s._v(" 8.添加环境变量")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# echo "export PATH=$PATH:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:${Mysql_app}/bin" >> /etc/profile\n# source /etc/profile\n# mysql -V\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"_9-开启防火墙"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-开启防火墙"}},[s._v("#")]),s._v(" 9.开启防火墙")]),s._v(" "),n("p",[s._v("如果有防火墙则开启")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# firewall-cmd 和 iptables选择其中一个，我这边用的是 iptables。\n# iptables\niptables -I INPUT -p tcp --dport 61920 -j ACCEPT\nservice iptables save\nsystemctl restart iptables.service\n\t\n# firewall\n# firewall-cmd --zone=public --add-port=61920/tcp --permanent\n# firewall-cmd --reload\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"_10-基本操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_10-基本操作"}},[s._v("#")]),s._v(" 10.基本操作")]),s._v(" "),n("h3",{attrs:{id:"进入实例mysql实例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进入实例mysql实例"}},[s._v("#")]),s._v(" 进入实例mysql实例")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# mysql  -u root -hlocalhost -P"61920" -p"123456"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"新增远程用户-root-mysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#新增远程用户-root-mysql"}},[s._v("#")]),s._v(" 新增远程用户: root_mysql")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# mysql> CREATE USER 'root_mysql'@'%' IDENTIFIED BY '12345678';\n# mysql> GRANT  all privileges ON * . * TO 'root_mysql'@'%' IDENTIFIED BY '123456';\n# mysql> GRANT ALL PRIVILEGES ON * . * TO 'root_mysql'@'%' WITH GRANT OPTION MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0 ;\n# mysql> flush privileges;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"关闭实例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关闭实例"}},[s._v("#")]),s._v(" 关闭实例")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('\n# mysqladmin -uroot -hlocalhost -P"${MYSQL_PORY}" -p"$Mysql_Password"  shutdown\n# mysqladmin -uroot -hlocalhost -P"61920" -p"123456"  shutdown\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"启动mysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动mysql"}},[s._v("#")]),s._v(" 启动mysql")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# mysqld_safe --defaults-file=/data/mysql5.7/etc/61920.cnf  &\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"shell脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#shell脚本"}},[s._v("#")]),s._v(" SHELL脚本")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# wget https://gitee.com/funet8/MYSQL/raw/master/Mysql_Shell/CentOS7_Install_mysql5_7.sh\n# sh CentOS7_Install_mysql5_7.sh\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);