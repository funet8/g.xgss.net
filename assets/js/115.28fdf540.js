(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{694:function(a,s,t){"use strict";t.r(s);var e=t(17),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"linux基于docker安装开源自动签到qiandao"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux基于docker安装开源自动签到qiandao"}},[a._v("#")]),a._v(" Linux基于Docker安装开源自动签到qiandao")]),a._v(" "),t("p",[a._v("本文使用docker来安装签到的服务端，首先需要一台Centos7的虚拟机或者云服务器。")]),a._v(" "),t("p",[a._v("本教程一共分为三步：")]),a._v(" "),t("p",[a._v("第1步：安装docker")]),a._v(" "),t("p",[a._v("第2步：创建容器")]),a._v(" "),t("p",[a._v("第3步：注册账号，配置站点")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("系统说明：Centos7\nIP地址： 192.168.1.5\n开源仓库：https://github.com/binux/qiandao\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("如果安装docker可以跳过安装Docker步骤")]),a._v(" "),t("h1",{attrs:{id:"一、安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、安装docker"}},[a._v("#")]),a._v(" 一、安装docker")]),a._v(" "),t("h2",{attrs:{id:"国内主机安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#国内主机安装docker"}},[a._v("#")]),a._v(" 国内主机安装Docker")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("使用国内镜像安装Docker\ncurl -sSL https://get.daocloud.io/docker | sh\n启动Docker服务\nservice docker start\n设置Docker服务项开机自启( 重要 )\nsystemctl enable docker\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("h2",{attrs:{id:"国外主机安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#国外主机安装docker"}},[a._v("#")]),a._v(" 国外主机安装Docker")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("使用官网地址安装Docker\ncurl -sSL https://get.docker.com | sh\n启动Docker服务\nservice docker start\n设置Docker服务项开机自启( 重要 )\nsystemctl enable docker\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("h1",{attrs:{id:"二、创建容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、创建容器"}},[a._v("#")]),a._v(" 二、创建容器")]),a._v(" "),t("h2",{attrs:{id:"_1-创建容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建容器"}},[a._v("#")]),a._v(" 1.创建容器")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("创建挂载的目录\nmkdir -p /data/docker/qiandao\nchmod 777 -R /data/docker/qiandao\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("启动容器")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run -itd \\\n--restart always \\\n--name qiandao \\\n-p 90:80 \\\n-v /data/docker/qiandao:/usr/src/app/volume \\\ndaocloud.io/fangzhengjin/qiandao\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("p",[a._v("容器启动命令解释：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("-itd      （i以交互模式运行容器，通常与 -t 同时使用； \nt:为容器重新分配一个伪输入终端，通常与 -i 同时使用；\nd:后台运行容器，并返回容器ID；）\n\n--restart=always（启动docker时自动启动容器）\n-p 90:80 端口映射（宿主机端口:docker的端口，由于宿主机的80端口占用了改为90）\n-v /data/docker/qiandao:/usr/src/app/volume （挂载点）\n\n什么是Volume\n你可以把Volume理解为一个挂载点，意为将主机中的目录挂载到容器中，这样可以在容器中与主机挂载点的文件交互\n添加Volume需要添加以下参数\n-v 主机挂载点:容器挂载点\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("h2",{attrs:{id:"_2-注册账号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-注册账号"}},[a._v("#")]),a._v(" 2.注册账号")]),a._v(" "),t("p",[a._v("使用浏览器：http://192.168.1.5:90 访问")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201014102756601-1654738388089.png?aliyun",alt:"image-20201014102756601"}})]),a._v(" "),t("h2",{attrs:{id:"_3-配置站点管理员"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置站点管理员"}},[a._v("#")]),a._v(" 3.配置站点管理员")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("1.进入容器管理\ndocker exec -it qiandao /bin/bash\n2.设置站点管理员\npython ./chrole.py 注册邮箱(该用户必须已经注册) admin\npython ./chrole.py star@funet8.com admin\n3.退出容器管理\nexit\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h2",{attrs:{id:"_4-其他命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-其他命令"}},[a._v("#")]),a._v(" 4.其他命令")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("重启容器\ndocker restart qiandao\n关闭容器\ndocker stop qiandao\n删除容器\ndocker rm -v qiandao\n使用参数 -v 的作用是为了确保删除容器自动创建的Volume\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h1",{attrs:{id:"三、升级备份数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、升级备份数据"}},[a._v("#")]),a._v(" 三、升级备份数据")]),a._v(" "),t("p",[a._v("本教程配置后的站点使用的数据库默认为sqlite\n更新镜像时只需要备份容器中的 database.db 文件即可\n将容器中的数据库文件拷贝到当前目录")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker cp qiandao:/usr/src/app/database.db .\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("将备份的数据库拷贝到容器中(当前目录的database.db文件)")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker cp database.db qiandao:/usr/src/app/\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("建议恢复数据库后立即重启容器")]),a._v(" "),t("h1",{attrs:{id:"使用浏览器插件获取cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用浏览器插件获取cookie"}},[a._v("#")]),a._v(" 使用浏览器插件获取Cookie")]),a._v(" "),t("h2",{attrs:{id:"_1-使用谷歌浏览器、360浏览器或者其他能安装-crx的浏览器。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用谷歌浏览器、360浏览器或者其他能安装-crx的浏览器。"}},[a._v("#")]),a._v(" 1.使用谷歌浏览器、360浏览器或者其他能安装.crx的浏览器。")]),a._v(" "),t("h2",{attrs:{id:"_2-需要har文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-需要har文件"}},[a._v("#")]),a._v(" 2.需要HAR文件")]),a._v(" "),t("p",[a._v("github开源的HAR文件： https://github.com/qiandao-today/templates.git")]),a._v(" "),t("h2",{attrs:{id:"_3-安装获取cookie的浏览器插件-getcookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装获取cookie的浏览器插件-getcookie"}},[a._v("#")]),a._v(" 3.安装获取cookie的浏览器插件“GetCookie”")]),a._v(" "),t("p",[a._v("由于谷歌官方已经把getcookie插件下架了，所以要单独下载 Get-Cookie-For-FPlus获取，而且下载安装也会被封，要")]),a._v(" "),t("h2",{attrs:{id:"插件安装流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件安装流程"}},[a._v("#")]),a._v(" 插件安装流程")]),a._v(" "),t("p",[a._v("普通方式，但是但是cookie类的插件被谷歌浏览器封掉了，无法安装，会显示“无法从改网站添加应用、扩展程序和用户脚本”！这时候就要用到360浏览器。")]),a._v(" "),t("p",[a._v("(1)将扩展迷上下载的安装包文件（.zip）解压为文件夹，其中类型为“crx”的文件就是接下来需要用到的安装文件")]),a._v(" "),t("p",[a._v("(2) 从设置->更多工具->扩展程序 打开扩展程序页面，或者地址栏输入 Chrome://extensions/ 按下回车打开扩展程序页面")]),a._v(" "),t("p",[a._v("(3) 打开扩展程序页面的“开发者模式”")]),a._v(" "),t("p",[a._v("(4) 将crx文件拖拽到扩展程序页面，完成安装")]),a._v(" "),t("p",[a._v("下载的文件直接拖入浏览器。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220609094331941.png?aliyun",alt:"image-20220609094331941"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220609101404464.png?aliyun",alt:"image-20220609101404464"}})]),a._v(" "),t("p",[a._v("打开B站，登录，再用")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20220609101901356.png?aliyun",alt:"image-20220609101901356"}})]),a._v(" "),t("h1",{attrs:{id:"使用签到工具自动签到"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用签到工具自动签到"}},[a._v("#")]),a._v(" 使用签到工具自动签到")]),a._v(" "),t("p",[a._v("使用cookie获取B的站将cookie复制出来")]),a._v(" "),t("p",[a._v("登录自动签到后台")]),a._v(" "),t("p",[a._v("如图")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230113513591.png?aliyun",alt:"image-20201230113513591"}})]),a._v(" "),t("p",[a._v("查看B站的签到记录是否成功")]),a._v(" "),t("h1",{attrs:{id:"给腾讯视频vip签到"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#给腾讯视频vip签到"}},[a._v("#")]),a._v(" 给腾讯视频VIP签到")]),a._v(" "),t("p",[a._v("1.从github上下载har文件 https://github.com/qiandao-today/templates.git 或者直接把git项目拷贝到本机电脑。")]),a._v(" "),t("p",[t("img",{attrs:{src:"G:/STAR%E5%AD%A6%E4%B9%A0/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/%E6%89%93%E5%8D%A1%E3%80%81%E7%AD%BE%E5%88%B0%E3%80%81%E7%BE%A4%E6%8E%A7%E3%80%81%E6%8C%82%E6%9C%BA%E7%B3%BB%E7%BB%9F/Docker%E9%83%A8%E7%BD%B2%E7%AD%BE%E5%88%B0%E7%AB%99%E6%95%99%E7%A8%8B-qiandao/images/image-20201230145901383.png",alt:"image-20201230145901383"}})]),a._v(" "),t("p",[a._v("2.进入签到后台")]),a._v(" "),t("p",[a._v("我的模板点加号")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230150952161.png?aliyun",alt:"image-20201230150952161"}})]),a._v(" "),t("p",[a._v("上传模板并且填写腾讯视频的qq号和密码")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230151129048.png?aliyun",alt:"image-20201230151129048"}})]),a._v(" "),t("p",[a._v('点击"测试"'),t("br"),a._v(" "),t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230151235327.png?aliyun",alt:"image-20201230151235327"}})]),a._v(" "),t("p",[a._v("登录腾讯视频： https://v.qq.com/")]),a._v(" "),t("p",[a._v("点击chrome浏览器的插件获取cookie，将cookie值填入测试的里面，点击“测试”")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230151603566.png?aliyun",alt:"image-20201230151603566"}})]),a._v(" "),t("p",[a._v("签到失败：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230151735859.png?aliyun",alt:"image-20201230151735859"}})]),a._v(" "),t("p",[a._v("保存")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230151815359.png?aliyun",alt:"image-20201230151815359"}})]),a._v(" "),t("p",[a._v("发布")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230151844238.png?aliyun",alt:"image-20201230151844238"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230151915867.png?aliyun",alt:"image-20201230151915867"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230152032018.png?aliyun",alt:"image-20201230152032018"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"G:/STAR%E5%AD%A6%E4%B9%A0/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/%E6%89%93%E5%8D%A1%E3%80%81%E7%AD%BE%E5%88%B0%E3%80%81%E7%BE%A4%E6%8E%A7%E3%80%81%E6%8C%82%E6%9C%BA%E7%B3%BB%E7%BB%9F/Docker%E9%83%A8%E7%BD%B2%E7%AD%BE%E5%88%B0%E7%AB%99%E6%95%99%E7%A8%8B-qiandao/images/image-20201230152141001.png",alt:"image-20201230152141001"}})]),a._v(" "),t("h2",{attrs:{id:"签到失败"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#签到失败"}},[a._v("#")]),a._v(" 签到失败")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("failed at 4/4 request, , http://localhost/util/unicode?content=%E7%AD%BE%E5%88%B0%E7%A7%AF%E5%88%86%EF%BC%9A%E3%80%90%2B{{zt3|urlencode}}%E3%80%91%20---------%E4%BA%8C%E6%AC%A1%E7%AD%BE%E5%88%B0%EF%BC%9A%E3%80%90{{zt1|urlencode}}{{zt2|urlencode}}V%E5%8E%89%E5%80%BC%E3%80%91-----%E6%9C%AC%E6%9C%88%E5%B7%B2%E7%BB%8F%E8%8E%B7%E5%BE%97%E3%80%90{{zt4|urlencode}}%E3%80%91----%E7%9B%AE%E5%89%8D%E7%A7%AF%E5%88%86%EF%BC%9A%E3%80%90{{zt5|urlencode}}%E3%80%91%E3%80%90{{zt6|urlencode}}%E3%80%91\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("csdn无法自动签到报错：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20201230153428711.png?aliyun",alt:"image-20201230153428711"}})]),a._v(" "),t("h1",{attrs:{id:"下载公开模板"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载公开模板"}},[a._v("#")]),a._v(" 下载公开模板")]),a._v(" "),t("p",[a._v("https://qiandao.today/tpls/public  （访问不稳定，可能需要土墙）")]),a._v(" "),t("p",[a._v("选择某一个har项目，点击“查看”再点”下载“就可以下载har文件")]),a._v(" "),t("p",[a._v("参考：")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/binux/qiandao/wiki/Docker%E9%83%A8%E7%BD%B2%E7%AD%BE%E5%88%B0%E7%AB%99%E6%95%99%E7%A8%8B",target:"_blank",rel:"noopener noreferrer"}},[a._v("Docker部署签到站教程"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("https://hub.docker.com/r/asdaragon/qiandao\nhttps://github.com/AragonSnow/qiandao\nhttps://github.com/qiandao-today/templates")]),a._v(" "),t("p",[a._v("利用阿里云监控实现360有钱联盟自动签到\nhttps://mkblog.cn/233/")])])}),[],!1,null,null,null);s.default=n.exports}}]);