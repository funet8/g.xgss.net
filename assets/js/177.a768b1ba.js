(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{759:function(a,s,t){"use strict";t.r(s);var e=t(17),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"centos7安装rabbitmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装rabbitmq"}},[a._v("#")]),a._v(" Centos7安装RabbitMQ")]),a._v(" "),t("h1",{attrs:{id:"_1、安装前准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装前准备"}},[a._v("#")]),a._v(" 1、安装前准备")]),a._v(" "),t("p",[a._v("由于RabbitMQ使用的是Erlang语言开发的，因此在安装RabbitMQ之前需要安装Erlang环境，Erlang与RabbitMQ的下载地址分别为：")]),a._v(" "),t("p",[a._v("Erlang：https://github.com/rabbitmq/erlang-rpm/releases")]),a._v(" "),t("p",[a._v("RabbitMQ：https://github.com/rabbitmq/rabbitmq-server/releases")]),a._v(" "),t("p",[a._v("注意：RabbitMQ与Erlang安装时是有版本对于关系，可以查看：https://www.rabbitmq.com/which-erlang.html")]),a._v(" "),t("h2",{attrs:{id:"版本选择-匹配centos7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#版本选择-匹配centos7"}},[a._v("#")]),a._v(" 版本选择（匹配Centos7）")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20230331105520563.png?aliyun",alt:"image-20230331105520563"}})]),a._v(" "),t("p",[a._v("由于高版本不支持Centos7后面这个el8,代表是Centos8才能安装的,高版本的RabbitMQ有些不支持Centos7,但是本篇博客用来演示的是Centos7的系统环境,所以小编在这只能带大家安装3.9.13的RabbitMQ了")]),a._v(" "),t("h3",{attrs:{id:"rabbitmq-3-9-13"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq-3-9-13"}},[a._v("#")]),a._v(" RabbitMQ： 3.9.13")]),a._v(" "),t("p",[a._v("https://github.com/rabbitmq/rabbitmq-server/releases/tag/v3.9.13")]),a._v(" "),t("h3",{attrs:{id:"erlang-25-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#erlang-25-3"}},[a._v("#")]),a._v(" Erlang：25.3")]),a._v(" "),t("p",[a._v("https://github.com/rabbitmq/erlang-rpm/releases/tag/v23.3.4")]),a._v(" "),t("p",[a._v("安装的系统为Centos7，因此在下载RabbitMQ与Erlang版本的时候需要下载xxx.el7的版本，我这里下载版本如下")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("rabbitmq-server-3.9.13-1.el7.noarch.rpm\n下载：\n# wget https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.9.13/rabbitmq-server-3.9.13-1.el7.noarch.rpm\n\nerlang-23.3.4.11-1.el7.x86_64.rpm\n下载： \n# wget https://github.com/rabbitmq/erlang-rpm/releases/download/v23.3.4/erlang-23.3.4-1.el7.x86_64.rpm\n\n备用下载：\n# wget  http://js.funet8.com/centos_software/rabbitmq/rabbitmq-server-3.9.13-1.el7.noarch.rpm\n# wget  http://js.funet8.com/centos_software/rabbitmq/erlang-23.3.4-1.el7.x86_64.rpm\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br")])]),t("p",[a._v("将下载好的文件上传到服务器。")]),a._v(" "),t("h1",{attrs:{id:"_2、安装erlang"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装erlang"}},[a._v("#")]),a._v(" 2、安装Erlang")]),a._v(" "),t("p",[a._v("使用如下命令安装"),t("code",[a._v("Erlang")])]),a._v(" "),t("div",{staticClass:"language-none line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# rpm -ivh erlang-23.3.4-1.el7.x86_64.rpm \nwarning: erlang-23.3.4-1.el7.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID cc4bbe5b: NOKEY\nPreparing...                          ################################# [100%]\nUpdating / installing...\n   1:erlang-23.3.4-1.el7              ################################# [100%]\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("h1",{attrs:{id:"_3、安装rabbitmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、安装rabbitmq"}},[a._v("#")]),a._v(" 3、安装RabbitMQ")]),a._v(" "),t("p",[a._v("上一步我们已经把Erlang安装成功，现在安装RabbitMQ，如下：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# rpm -ivh rabbitmq-server-3.9.13-1.el7.noarch.rpm \nwarning: rabbitmq-server-3.9.13-1.el7.noarch.rpm: Header V4 RSA/SHA512 Signature, key ID 6026dfca: NOKEY\nPreparing...                          ################################# [100%]\nUpdating / installing...\n   1:rabbitmq-server-3.9.13-1.el7     ################################# [100%]\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("检查是否安装成功 rabitmqctl version")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# rabitmqctl version\n-bash: rabitmqctl: command not found\n重装了一次就显示正常\n# rabbitmqctl version\n3.9.13\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("h1",{attrs:{id:"_4、运行rabbitmq服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、运行rabbitmq服务器"}},[a._v("#")]),a._v(" 4、运行RabbitMQ服务器")]),a._v(" "),t("h2",{attrs:{id:"_4-1、启动服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1、启动服务器"}},[a._v("#")]),a._v(" 4.1、启动服务器")]),a._v(" "),t("p",[a._v("添加开机启动RabbitMQ服务")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("chkconfig rabbitmq-server on\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("启动RabbitMQ服务")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("systemctl start rabbitmq-server\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("查看服务状态")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("systemctl status rabbitmq-server\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("停止服务")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("systemctl stop rabbitmq-server\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"_4-2、安装web插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2、安装web插件"}},[a._v("#")]),a._v(" 4.2、安装WEB插件")]),a._v(" "),t("p",[a._v("RabbitMQ默认提供了WEB插件，方便通过页面进行RabbitMQ管理，需要执行如下命令启用WEB插件，启用之前如果RabbitMQ服务已经启动，则先停止服务。")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("systemctl stop rabbitmq-server\nrabbitmq-plugins enable rabbitmq_management\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("查看端口")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# netstat -tunpl|grep 15672\ntcp        0      0 0.0.0.0:15672           0.0.0.0:*               LISTEN      2510/beam.smp   \n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("重新启动RabbitMQ服务")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("\n通过地址：http://192.168.1.20:15672 然后访问RabbitMQ\n\n开放防火墙端口： 15672\n\niptables -A INPUT -p tcp --dport 15672 -j ACCEPT\nservice iptables save\nsystemctl restart iptables\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20230331111350141.png?aliyun",alt:"image-20230331111350141"}})]),a._v(" "),t("p",[a._v("RabbitMQ默认提供了一个guest账户，默认的账户没有权限登录不了，因此接下来我们需要创建用户。")]),a._v(" "),t("h2",{attrs:{id:"_4-3、创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3、创建用户"}},[a._v("#")]),a._v(" 4.3、创建用户")]),a._v(" "),t("h3",{attrs:{id:"创建账号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建账号"}},[a._v("#")]),a._v(" 创建账号")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# rabbitmqctl add_user admin 123456\nAdding user \"admin\" ...\nDone. Don't forget to grant the user permissions to some virtual hosts! See 'rabbitmqctl help set_permissions' to learn more.\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("h3",{attrs:{id:"设置用户角色"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置用户角色"}},[a._v("#")]),a._v(" 设置用户角色")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("rabbitmqctl set_user_tags admin administrator\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"设置用户权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置用户权限"}},[a._v("#")]),a._v(" 设置用户权限")]),a._v(" "),t("p",[a._v("命令格式：rabbitmqctl set_permissions [-p "),t("vhostpath",[a._v("] "),t("user",[t("conf",[t("write",[t("read")],1)],1)],1)],1)],1),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('rabbitmqctl set_permissions -p "/" admin ".*" ".*" ".*"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("上面命令表示用户具有/vhost1这个virtual host中的所有资源配置、读、写权限")]),a._v(" "),t("h3",{attrs:{id:"查看用户和角色"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看用户和角色"}},[a._v("#")]),a._v(" 查看用户和角色")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("rabbitmqctl list_users\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"删除用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除用户"}},[a._v("#")]),a._v(" 删除用户")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("rabbitmqctl delete_user guest\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("可以看到用户已经添加成功并设置了角色，现在就可以使用用户登录RabbitMQ了。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgoss.xgss.net/picgo/image-20230331111757327.png?aliyun",alt:"image-20230331111757327"}})]),a._v(" "),t("h1",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),t("p",[a._v("https://www.cnblogs.com/tenghu/p/15887218.html")])])}),[],!1,null,null,null);s.default=r.exports}}]);